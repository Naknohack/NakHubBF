Settings = Settings or {}

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")

local Plr = Players.LocalPlayer

if Settings.Translator == true then
    pcall(function()
        _G.RedzTranslator = HttpService:JSONDecode(game:HttpGet("https://raw.githubusercontent.com/Naknohack/RedzUi/refs/heads/main/NewPortuguese.txt"))
    end)
end

local function JoinTeam()
    local targetTeam = "Marines"
    if Settings.JoinTeam == "Pirates" then
        targetTeam = "Pirates"
    end

    if not Plr.Team or (Plr.Team.Name ~= "Marines" and Plr.Team.Name ~= "Pirates") then
        pcall(function()
            ReplicatedStorage
                :WaitForChild("Remotes")
                :WaitForChild("CommF_")
                :InvokeServer("SetTeam", targetTeam)
        end)
    end
end

JoinTeam()

hookfunction(require(game:GetService("ReplicatedStorage").Effect.Container.Death), function()
    -- empty block
end)
hookfunction(require(game:GetService("ReplicatedStorage").Effect.Container.Respawn), function()
    -- empty block
end)
if game.PlaceId == 2753915549 or game.PlaceId == 85211729168715 then
    World1 = true
elseif game.PlaceId == 4442272183 or game.PlaceId == 79091703265657 then
    World2 = true
elseif game.PlaceId == 7449423635 or game.PlaceId == 100117331123089 then
    World3 = true
end

local vu32 = loadstring(game:HttpGet("https://raw.githubusercontent.com/Naknohack/RedzUi/refs/heads/main/UiRedzhub.lua"))()
local v466 = vu32:MakeWindow({
    Title = "NakHub PvP",
    SubTitle = "By Naknohack",
    SaveFolder = "Redz | redz lib v5.lua"
})

v466:AddMinimizeButton({
    Button = { Image = "rbxassetid://100306458933414", BackgroundTransparency = 0 },
    Size = UDim2.new(0, 35, 0, 35),
    Corner = { CornerRadius = UDim.new(0.25, 0) },
})

local v484 = v466:MakeTab({"Discord", "info"})
local v499 = v466:MakeTab({"Hỗ Trợ", "Scroll"})
local v494 = v466:MakeTab({"Định vị", "user"})
local v495 = v466:MakeTab({"Shop", "shoppingCart"})
local v496 = v466:MakeTab({"Settings", "settings"})
v484:AddDiscordInvite({
    Name = "Nak&Nhoi | Community",
    Description = "",
    Logo = "rbxassetid://118360427494043",
    Invite = "https://discord.gg/vtgWe5V9bd"
})
              
v499:AddToggle({
	Name = "Aimbot Skills",
	Description = "",
	Default = false,
	Callback = function(state)
		SilentAim_Enabled = state
	end
})

--==================================================
-- SISTEMA SILENT AIM (LOGO DEPOIS DO TOGGLE)
--==================================================
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local RS = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local camera = workspace.CurrentCamera

local PredictionEnabled = true
local PredictionAmount = 0.1
local maxRange = 1000

local renderConnection = nil
local currentTool = nil
local PlayersPosition = nil
local Selectedplayer = nil
local characterConnections = {}

-- ================= HRP =================
local function getHRP(model)
	return model and model:FindFirstChild("HumanoidRootPart")
end

-- ================= CLEAR =================
local function clearConnections()
	for _, c in ipairs(characterConnections) do
		pcall(function() c:Disconnect() end)
	end
	characterConnections = {}
end

-- ================= TEAM CHECK =================
local function isEnemy(plr)
	if not plr or plr == player then return false end
	if not player.Team or not plr.Team then return true end
	return player.Team ~= plr.Team
end

-- ================= PREDICTION =================
local function getPredictedPosition(hrp)
	if not hrp then return nil end
	local hum = hrp.Parent:FindFirstChildWhichIsA("Humanoid")
	if not hum or not PredictionEnabled or hum.WalkSpeed < 5 then
		return hrp.Position
	end
	return hrp.Position + (hrp.Velocity * PredictionAmount)
end

-- ================= CLOSEST PLAYER =================
local function getClosestPlayer(lpHRP)
	local closest, dist = nil, math.huge
	for _, plr in ipairs(Players:GetPlayers()) do
		if isEnemy(plr) and plr.Character then
			local hum = plr.Character:FindFirstChildWhichIsA("Humanoid")
			local hrp = getHRP(plr.Character)
			if hum and hum.Health > 0 and hrp then
				local d = (hrp.Position - lpHRP.Position).Magnitude
				if d < dist and d <= maxRange then
					dist = d
					closest = plr
				end
			end
		end
	end
	return closest
end

-- ================= SKILL READY =================
local function isSkillReadyForTool(toolName)
	if not toolName then return false end
	local gui = player:FindFirstChild("PlayerGui")
	if not gui then return false end

	local skills = gui:FindFirstChild("Main") and gui.Main:FindFirstChild("Skills")
	if not skills then return false end

	local tool = skills:FindFirstChild(toolName)
	if not tool then return false end

	for _, key in ipairs({"Z","X","C","V"}) do
		local skill = tool:FindFirstChild(key)
		if skill and skill:FindFirstChild("Cooldown") then
			if skill.Cooldown.Size.X.Scale == 1 then
				return true
			end
		end
	end
	return false
end

-- ================= RENDER LOOP =================
local function startRender()
	if renderConnection then return end

	renderConnection = RunService.RenderStepped:Connect(function()
		if not SilentAim_Enabled then return end

		local char = player.Character
		local hrp = char and getHRP(char)
		if not hrp then return end

		local target = Selectedplayer or getClosestPlayer(hrp)
		if not (target and target.Character) then
			PlayersPosition = nil
			return
		end

		local thrp = getHRP(target.Character)
		if not thrp then return end

		PlayersPosition = getPredictedPosition(thrp)

		if currentTool and isSkillReadyForTool(currentTool.Name) then
			local look = (Vector3.new(
				PlayersPosition.X,
				hrp.Position.Y,
				PlayersPosition.Z
			) - hrp.Position).Unit

			hrp.CFrame = CFrame.new(hrp.Position, hrp.Position + look)
		end
	end)
end

local function stopRender()
	if renderConnection then
		renderConnection:Disconnect()
		renderConnection = nil
	end
end

-- ================= TOOL TRACK =================
player.CharacterAdded:Connect(function(char)
	clearConnections()
	table.insert(characterConnections,
		char.ChildAdded:Connect(function(obj)
			if obj:IsA("Tool") then
				currentTool = obj
			end
		end)
	)
end)
-- ================= METAMETHOD =================
pcall(function()
	local mt = getrawmetatable(game)
	setreadonly(mt, false)

	local old = mt.__namecall
	mt.__namecall = newcclosure(function(self, ...)
		local method = getnamecallmethod()
		local args = {...}

		if (method == "FireServer" or method == "InvokeServer")
			and SilentAim_Enabled
			and PlayersPosition
			and typeof(args[1]) == "Vector3" then

			args[1] = PlayersPosition
			return old(self, unpack(args))
		end

		return old(self, ...)
	end)

	setreadonly(mt, true)
end)

-- ================= AUTO START / STOP =================
RunService.RenderStepped:Connect(function()
	if SilentAim_Enabled then
		startRender()
	else
		stopRender()
	end
end)



local _ = v494:AddSection({"Esp"})
local ESP_SIZE_FILE = "esp_size_save.txt"

if isfile(ESP_SIZE_FILE) then
	_G.ESPSize = tonumber(readfile(ESP_SIZE_FILE)) or 24
else
	_G.ESPSize = 24
	writefile(ESP_SIZE_FILE, "24")
end

v494:AddSlider({
	Name = "ESP Size",
	Min = 10,
	Max = 40,
	Default = _G.ESPSize,
	Callback = function(Value)
		_G.ESPSize = Value
		writefile(ESP_SIZE_FILE, tostring(Value))

		for _, player in pairs(game:GetService("Players"):GetPlayers()) do
			if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
				local hrp = player.Character.HumanoidRootPart
				local esp = hrp:FindFirstChild("PlayerESP")

				if esp then
					for _, obj in pairs(esp:GetChildren()) do
						if obj:IsA("TextLabel") then
							obj.TextSize = Value
						end
					end
				end
			end
		end
	end
})

for _, player in pairs(game:GetService("Players"):GetPlayers()) do
	if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		local hrp = player.Character.HumanoidRootPart
		local esp = hrp:FindFirstChild("PlayerESP")

		if esp then
			for _, obj in pairs(esp:GetChildren()) do
				if obj:IsA("TextLabel") then
					obj.TextSize = _G.ESPSize
				end
			end
		end
	end
end


local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local ESP_SAVE_FILE = "esp_players_save.txt"

-- Estado salvo
local ESPPlayer = false
if isfile(ESP_SAVE_FILE) then
	ESPPlayer = readfile(ESP_SAVE_FILE) == "true"
else
	writefile(ESP_SAVE_FILE, "false")
end

local Connections = {}

-- Remove ESP
local function RemoveESP(player)
	if player.Character then
		local hrp = player.Character:FindFirstChild("HumanoidRootPart")
		if hrp then
			local esp = hrp:FindFirstChild("PlayerESP")
			if esp then
				esp:Destroy()
			end
		end
	end

	if Connections[player] then
		Connections[player]:Disconnect()
		Connections[player] = nil
	end
end

-- Criar ESP
local function CreateESP(player)
	if player == LocalPlayer then return end
	if not ESPPlayer then return end
	if not player.Character then return end

	local char = player.Character
	local hrp = char:WaitForChild("HumanoidRootPart", 3)
	local hum = char:WaitForChild("Humanoid", 3)

	if not hrp or not hum then return end

	RemoveESP(player)

	local gui = Instance.new("BillboardGui")
	gui.Name = "PlayerESP"
	gui.Adornee = hrp
	gui.Size = UDim2.new(0, 220, 0, 40)
	gui.StudsOffset = Vector3.new(0, 3, 0)
	gui.AlwaysOnTop = true
	gui.MaxDistance = 999999
	gui.LightInfluence = 0
	gui.Parent = hrp

	local nameLabel = Instance.new("TextLabel")
	nameLabel.BackgroundTransparency = 1
	nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
	nameLabel.Position = UDim2.new(0, 0, 0, 0)
	nameLabel.RichText = true
    nameLabel.TextColor3 = Color3.fromRGB(210,210,210) 
	nameLabel.TextStrokeTransparency = 0
	nameLabel.TextSize = 24
	nameLabel.Font = Enum.Font.SourceSans
	nameLabel.TextXAlignment = Enum.TextXAlignment.Center
	nameLabel.TextYAlignment = Enum.TextYAlignment.Center
	nameLabel.Parent = gui

	local hpLabel = Instance.new("TextLabel")
	hpLabel.BackgroundTransparency = 1
	hpLabel.Size = UDim2.new(1, 0, 0.5, 0)
	hpLabel.Position = UDim2.new(0, 0, 0.5, 0)
	hpLabel.TextColor3 = Color3.fromRGB(0,255,0)
	hpLabel.TextStrokeTransparency = 0
	hpLabel.TextSize = 24
	hpLabel.Font = Enum.Font.SourceSans
	hpLabel.TextXAlignment = Enum.TextXAlignment.Center
	hpLabel.TextYAlignment = Enum.TextYAlignment.Center
	hpLabel.Parent = gui

	Connections[player] = RunService.RenderStepped:Connect(function()

		if not ESPPlayer then
			RemoveESP(player)
			return
		end

		if not player.Character or hum.Health <= 0 then
			RemoveESP(player)
			return
		end

		local myChar = LocalPlayer.Character
		if not myChar then return end

		local myHRP = myChar:FindFirstChild("HumanoidRootPart")
		if not myHRP then return end

		local distance = math.floor(
			(myHRP.Position - hrp.Position).Magnitude
		)

    	nameLabel.Text = "<font color='rgb(235,235,235)'>" .. player.Name .. "</font> [ "  ..  distance .. "m ]"
		hpLabel.Text = "[" .. math.floor(hum.Health) .. "/" .. math.floor(hum.MaxHealth) .. "]"
	end)
end

-- Setup jogador (resolve spawn + respawn)
local function SetupPlayer(player)
	if player == LocalPlayer then return end

	player.CharacterAdded:Connect(function()
		if ESPPlayer then
			task.wait(0.2)
			CreateESP(player)
		end
	end)

	if player.Character then
		task.wait(0.2)
		CreateESP(player)
	end
end

-- Aplicar para jogadores já no servidor
for _,player in ipairs(Players:GetPlayers()) do
	SetupPlayer(player)
end

-- Jogadores novos
Players.PlayerAdded:Connect(function(player)
	SetupPlayer(player)
end)

Players.PlayerRemoving:Connect(function(player)
	RemoveESP(player)
end)

-- Toggle da sua lib
v494:AddToggle({
	Title = "ESP Players",
	Default = ESPPlayer,
	Callback = function(v)
		ESPPlayer = v
		writefile(ESP_SAVE_FILE, tostring(v))

		for _,player in ipairs(Players:GetPlayers()) do
			if player ~= LocalPlayer then
				if v then
					CreateESP(player)
				else
					RemoveESP(player)
				end
			end
		end
	end
})

    v494:AddSection("Đặc Biệt")
local vu14 = game.Players.LocalPlayer

v494:AddButton({
    "Mưa Nham Thạch",
    function()
        if vu14.Character and vu14.Character.PrimaryPart then
            require(game:GetService("ReplicatedStorage").Effect.Container.UzothSpec)({
                Position = vu14.Character.PrimaryPart.Position
            })
        end
    end
})
local vu14 = game.Players.LocalPlayer

v494:AddButton({
    "Loại bỏ hồi chiêu Portal Dash",
    function()
        local portal = vu14.Backpack:FindFirstChild("Portal-Portal") or (vu14.Character and vu14.Character:FindFirstChild("Portal-Portal"))
        if portal then
            local connections = getconnections(portal.Activated)
            for i = 1, #connections do
                local conn = connections[i]
                local func = conn.Function
                if func and #debug.getupvalues(func) == 9 then
                    task.spawn(function()
                        while portal and portal:IsDescendantOf(game) do
                            debug.setupvalue(func, 2, 0)
                            task.wait(0.1) 
                        end
                    end)
                end
            end
        end
    end
})

local _ = v495:AddSection({"Fighting Style"})
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LP = Players.LocalPlayer

local SEA
if game.PlaceId == 2753915549 or game.PlaceId == 85211729168715 then
	SEA = 1
elseif game.PlaceId == 4442272183 or game.PlaceId == 79091703265657 then
	SEA = 2
elseif game.PlaceId == 7449423635 or game.PlaceId == 100117331123089 then
	SEA = 3
else
	return
end

_G.BuyFly = false
local BV, BG
local TargetPos = nil

local NPCS = {
	BlackLeg={[1]={Vector3.new(-988,13,3996)},[2]={Vector3.new(-4750.61, 35.08, -4846.33)},[3]={Vector3.new(-5043.64,371.35,-3183.40)}},
	Electro={[1]={Vector3.new(-5382.27,14.15,-2150.34)},[2]={Vector3.new(-4863.81, 35.08, -4767.54)},[3]={Vector3.new(-4993.20,314.56,-3198.06)}},
	FishmanKarate={[1]={Vector3.new(61584.35,18.85,988.89)},[2]={Vector3.new(-4960.04, 35.08, -4662.67)},[3]={Vector3.new(-5017.39,371.35,-3187.53)}},
	Superhuman={[2]={Vector3.new(1378.05, 247.43, -5189.37)},[3]={Vector3.new(-4997.53,371.35,-3197.46)}},
	DeathStep={[2]={Vector3.new(6360.04, 296.67, -6763.93)},[3]={Vector3.new(-4997.64,314.56,-3220.37)}},
	SharkmanKarate={[2]={Vector3.new(-2602.40, 239.22, -10314.75)},[3]={Vector3.new(-4970.48,314.56,-3225.04)}},
	ElectricClaw={[3]={Vector3.new(-10369.83,331.69,-10126.49)}},
	DragonTalon={[3]={Vector3.new(5662.03,1211.32,858.60)}},
	GodHuman={[3]={Vector3.new(-13775.56,334.66,-9877.67)}},
	SanguineArt={[3]={Vector3.new(-16514.86,23.18,-190.84)}}
}

local function HRP()
	return LP.Character and LP.Character:FindFirstChild("HumanoidRootPart")
end

local LV, AO
local TargetPos

local function EnsureFly()
	local hrp = HRP()
	if not hrp then return end

	if not LV or LV.Parent ~= hrp then
		if LV then LV:Destroy() end
		LV = Instance.new("LinearVelocity")
		LV.Attachment0 = hrp:FindFirstChildOfClass("Attachment") or Instance.new("Attachment", hrp)
		LV.MaxForce = math.huge
		LV.VectorVelocity = Vector3.zero
		LV.Parent = hrp
	end

	if not AO or AO.Parent ~= hrp then
		if AO then AO:Destroy() end
		AO = Instance.new("AlignOrientation")
		AO.Attachment0 = hrp:FindFirstChildOfClass("Attachment")
		AO.MaxTorque = math.huge
		AO.Responsiveness = 200
		AO.Parent = hrp
	end
end

local function StopFly()
	RunService:UnbindFromRenderStep("BuyFly")
	if LV then LV:Destroy() LV=nil end
	if AO then AO:Destroy() AO=nil end
	TargetPos = nil
end

local function FlyTo(pos)
	TargetPos = pos

	RunService:BindToRenderStep("BuyFly", Enum.RenderPriority.Character.Value + 1, function()
		if not _G.BuyFly then StopFly() return end

		local hrp = HRP()
		if not hrp then return end

		EnsureFly()

		for _,v in ipairs(LP.Character:GetDescendants()) do
			if v:IsA("BasePart") then v.CanCollide = false end
		end

		local delta = TargetPos - hrp.Position
		local dist = delta.Magnitude

		if dist <= 3 then
			LV.VectorVelocity = Vector3.zero
			hrp.AssemblyLinearVelocity = Vector3.zero
			hrp.CFrame = CFrame.new(TargetPos)
			return
		end

		local dir = delta.Unit
		LV.VectorVelocity = dir * math.clamp(dist * 6, 120, 330)
		AO.CFrame = CFrame.lookAt(hrp.Position, hrp.Position + dir)
	end)
end

local function Buy(style, remote)
	task.spawn(function()
		local pos = NPCS[style] and NPCS[style][SEA]
		if not pos then return end

		FlyTo(pos[1])

		repeat task.wait()
		until (HRP() and (HRP().Position - pos[1]).Magnitude <= 4) or not _G.BuyFly

		if _G.BuyFly then
			ReplicatedStorage.Remotes.CommF_:InvokeServer(remote)
		end
	end)
end

LP.CharacterAdded:Connect(function()
	task.wait(0.4)
	if _G.BuyFly and TargetPos then
		FlyTo(TargetPos)
	end
end)
local function StopAllBuy()
	_G.BuyFly = false
	StopFly()
end

v495:AddToggle({
	Title = "Buy Black Leg",
	Value = false,
	Callback = function(v)
		StopAllBuy()
		if v then
			_G.BuyFly = true
			Buy("BlackLeg","BuyBlackLeg")
		end
	end
})

v495:AddToggle({
	Title = "Buy Electro",
	Value = false,
	Callback = function(v)
		StopAllBuy()
		if v then
			_G.BuyFly = true
			Buy("Electro","BuyElectro")
		end
	end
})

v495:AddToggle({
	Title = "Buy Fishman Karate",
	Value = false,
	Callback = function(v)
		StopAllBuy()
		if v then
			_G.BuyFly = true
			Buy("FishmanKarate","BuyFishmanKarate")
		end
	end
})

v495:AddToggle({
	Title = "Buy Superhuman",
	Value = false,
	Callback = function(v)
		StopAllBuy()
		if v then
			_G.BuyFly = true
			Buy("Superhuman","BuySuperhuman")
		end
	end
})

v495:AddToggle({
	Title = "Buy Death Step",
	Value = false,
	Callback = function(v)
		StopAllBuy()
		if v then
			_G.BuyFly = true
			Buy("DeathStep","BuyDeathStep")
		end
	end
})

v495:AddToggle({
	Title = "Buy Sharkman Karate",
	Value = false,
	Callback = function(v)
		StopAllBuy()
		if v then
			_G.BuyFly = true
			Buy("SharkmanKarate","BuySharkmanKarate")
		end
	end
})

v495:AddToggle({
	Title = "Buy Electric Claw",
	Value = false,
	Callback = function(v)
		StopAllBuy()
		if v then
			_G.BuyFly = true
			Buy("ElectricClaw","BuyElectricClaw")
		end
	end
})

v495:AddToggle({
	Title = "Buy Dragon Talon",
	Value = false,
	Callback = function(v)
		StopAllBuy()
		if v then
			_G.BuyFly = true
			Buy("DragonTalon","BuyDragonTalon")
		end
	end
})

v495:AddToggle({
	Title = "Buy God Human",
	Value = false,
	Callback = function(v)
		StopAllBuy()
		if v then
			_G.BuyFly = true
			Buy("GodHuman","BuyGodhuman")
		end
	end
})

v495:AddToggle({
	Title = "Buy Sanguine Art",
	Value = false,
	Callback = function(v)
		StopAllBuy()
		if v then
			_G.BuyFly = true
			Buy("SanguineArt","BuySanguineArt")
		end
	end
})

local _ = v495:AddSection({"Reset Stats , Random Race"})
v495:AddButton({
    Title = "buy Ghoul",
    Description = "",
    Callback = function()
        local v1162 = {[1] = "Ectoplasm", [2] = "Change", [3] = 4}
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(v1162))
    end
})
v495:AddButton({
    Title = "buy Cyborg",
    Description = "",
    Callback = function()
        local v1163 = {[1] = "CyborgTrainer", [2] = "Buy"}
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(v1163))
    end
})
v495:AddButton({
    Title = "Reset Stats 2,500F",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BlackbeardReward", "Refund", "1")
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BlackbeardReward", "Refund", "2")
    end
})
v495:AddButton({
    Title = "Random Race 3,000F",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BlackbeardReward", "Reroll", "1")
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("BlackbeardReward", "Reroll", "2")
    end
})

local _ = v496:AddSection({"Join Server"})
v496:AddTextBox({
        Name = "Job ID",
        PlaceholderText = "Paste the Job ID here...",
        Callback = function(p215)
            if p215 ~= "" then
                game:GetService("TeleportService"):TeleportToPlaceInstance(game.PlaceId, p215)
            end
        end
    })
v496:AddButton({
    Title = "Join Clipboard",
    Description = "Join server from copied JobId",
    Callback = function()
        local TeleportService = game:GetService("TeleportService")
        local Players = game:GetService("Players")
        local LocalPlayer = Players.LocalPlayer

        local jobId = tostring(getclipboard())

        if jobId and jobId ~= "" then
            TeleportService:TeleportToPlaceInstance(game.PlaceId, jobId, LocalPlayer)
        else
            warn("Clipboard vazio ou inválido")
        end
    end
})

local _ = v496:AddSection({"Settings"})
v496:AddToggle({
    Name = "Fast Attack",
    Description = "",
    Default = true,
    Callback = function(value)
        _G.AutoAttack = value
        if value then
            print("")
        else
            print("")
        end
    end
})

local v1 = next
local v2 = {
    game.ReplicatedStorage.Util,
    game.ReplicatedStorage.Common,
    game.ReplicatedStorage.Remotes,
    game.ReplicatedStorage.Assets,
    game.ReplicatedStorage.FX,
}
local v3 = nil
local u4 = nil
local u5 = nil

while true do
    local v6

    v3, v6 = v1(v2, v3)

    if v3 == nil then
        break
    end

    local v7 = next
    local v8, v9 = v6:GetChildren()

    while true do
        local v10

        v9, v10 = v7(v8, v9)

        if v9 == nil then
            break
        end
        if v10:IsA('RemoteEvent') and v10:GetAttribute('Id') then
            u5 = v10:GetAttribute('Id')
            u4 = v10
        end
    end

    v6.ChildAdded:Connect(function(p11)
        if p11:IsA('RemoteEvent') and p11:GetAttribute('Id') then
            u5 = p11:GetAttribute('Id')
            u4 = p11
        end
    end)
end

task.spawn(function()
    while task.wait(0.0001) do
        -- Só executa se o toggle estiver ativado
        if _G.AutoAttack then
            local _Character = game.Players.LocalPlayer.Character
            local v13

            if _Character then
                v13 = _Character:FindFirstChild('HumanoidRootPart')
            else
                v13 = _Character
            end

            local v14, v15, v16 = ipairs({
                workspace.Enemies,
                workspace.Characters,
            })
            local u17 = {}

            while true do
                local v18

                v16, v18 = v14(v15, v16)

                if v16 == nil then
                    break
                end

                local v19, v20, v21 = ipairs(v18 and v18:GetChildren() or {})

                while true do
                    local v22

                    v21, v22 = v19(v20, v21)

                    if v21 == nil then
                        break
                    end

                    local _HumanoidRootPart = v22:FindFirstChild('HumanoidRootPart')
                    local _Humanoid = v22:FindFirstChild('Humanoid')

                    if v22 ~= _Character and (_HumanoidRootPart and (_Humanoid and (_Humanoid.Health > 0 and (_HumanoidRootPart.Position - v13.Position).Magnitude <= 60))) then
                        local v25, v26, v27 = ipairs(v22:GetChildren())

                        while true do
                            local v28

                            v27, v28 = v25(v26, v27)

                            if v27 == nil then
                                break
                            end
                            if v28:IsA('BasePart') and (_HumanoidRootPart.Position - v13.Position).Magnitude <= 60 then
                                u17[#u17 + 1] = {v22, v28}
                            end
                        end
                    end
                end
            end

            local _Tool = _Character:FindFirstChildOfClass('Tool')

            if #u17 > 0 and (_Tool and (_Tool:GetAttribute('WeaponType') == 'Melee' or _Tool:GetAttribute('WeaponType') == 'Sword')) then
                pcall(function()
                    require(game.ReplicatedStorage.Modules.Net):RemoteEvent('RegisterHit', true)
                    game.ReplicatedStorage.Modules.Net['RE/RegisterAttack']:FireServer()

                    local _Head = u17[1][1]:FindFirstChild('Head')

                    if _Head then
                        game.ReplicatedStorage.Modules.Net['RE/RegisterHit']:FireServer(_Head, u17, {}, tostring(game.Players.LocalPlayer.UserId):sub(2, 4) .. tostring(coroutine.running()):sub(11, 15))
                        cloneref(u4):FireServer(string.gsub('RE/RegisterHit', '.', function(p31)
                            return string.char(bit32.bxor(string.byte(p31), math.floor(workspace:GetServerTimeNow() / 10 % 10) + 1))
                        end), bit32.bxor(u5 + 909090, game.ReplicatedStorage.Modules.Net.seed:InvokeServer() * 2), _Head, u17)
                    end
                end)
            end
        end
    end
end)
v496:AddToggle({
    Name = "Bring Mob",
    Description = "",
    Default = true,
    Callback = function(v1165)
        _G.BringMonster = v1165
        StopTween(_G.BringMonster)
    end
})
spawn(function()
    while task.wait() do
        pcall(function()
            CheckQuest()
            for _, v1167 in pairs(game:GetService("Workspace").Enemies:GetChildren()) do
                if _G.BringMonster and (StartBring and v1167.Name == MonFarm or v1167.Name == Mon and v1167:FindFirstChild("Humanoid") and v1167:FindFirstChild("HumanoidRootPart") and v1167.Humanoid.Health > 0 and (v1167.HumanoidRootPart.Position - game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <= 320) then
                    if v1167.Name == "Factory Staff" then
                        if (v1167.HumanoidRootPart.Position - PosMon.Position).Magnitude <= 250 then
                            v1167.Head.CanCollide = false
                            v1167.HumanoidRootPart.CanCollide = false
                            v1167.HumanoidRootPart.Size = Vector3.new(60, 60, 60)
                            v1167.HumanoidRootPart.CFrame = PosMon
                            if v1167.Humanoid:FindFirstChild("Animator") then
                                v1167.Humanoid.Animator:Destroy()
                            end
                            sethiddenproperty(game:GetService("Players").LocalPlayer, "SimulationRadius", math.huge)
                        end
                    elseif (v1167.Name == MonFarm or v1167.Name == Mon) and (v1167.HumanoidRootPart.Position - PosMon.Position).Magnitude <= 320 then
                        v1167.HumanoidRootPart.Size = Vector3.new(60, 60, 60)
                        v1167.HumanoidRootPart.CFrame = PosMon
                        v1167.HumanoidRootPart.CanCollide = false
                        v1167.Head.CanCollide = false
                        if v1167.Humanoid:FindFirstChild("Animator") then
                            v1167.Humanoid.Animator:Destroy()
                        end
                        sethiddenproperty(game.Players.LocalPlayer, "SimulationRadius", math.huge)
                    end
                end
            end
        end)
    end
end)
function InMyNetWork(v1168)
    if not isnetworkowner then
        if (v1168.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude > 320 then
            return false
        else
            return true
        end
    else
        return isnetworkowner(v1168)
    end
end
local Players = game:GetService("Players")
local l_LocalPlayer_18 = Players.LocalPlayer

-- arquivos de save
local SPEED_SAVE_FILE = "walkspeed_save.txt"
local JUMP_SAVE_FILE = "jump_save.txt"

-- carrega valores salvos
if isfile(SPEED_SAVE_FILE) then
	getgenv().WalkSpeedValue = tonumber(readfile(SPEED_SAVE_FILE)) or 58
else
	getgenv().WalkSpeedValue = 58
end

if isfile(JUMP_SAVE_FILE) then
	getgenv().JumpValue = tonumber(readfile(JUMP_SAVE_FILE)) or 58
else
	getgenv().JumpValue = 58
end

local function v1135(v1133)
	local v1134 = v1133:WaitForChild("Humanoid", 5)
	if v1134 then
		v1134.WalkSpeed = getgenv().WalkSpeedValue
		v1134.JumpPower = getgenv().JumpValue

		v1134:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
			v1134.WalkSpeed = getgenv().WalkSpeedValue
		end)

		v1134:GetPropertyChangedSignal("JumpPower"):Connect(function()
			v1134.JumpPower = getgenv().JumpValue
		end)
	end
end

l_LocalPlayer_18.CharacterAdded:Connect(function(v1136)
	v1135(v1136)
end)

if l_LocalPlayer_18.Character then
	v1135(l_LocalPlayer_18.Character)
end

v499:AddSlider({
	Title = "Chạy Nhanh",
	Min = 26,
	Max = 300,
	Default = getgenv().WalkSpeedValue,
	Callback = function(v1137)
		getgenv().WalkSpeedValue = v1137
		writefile(SPEED_SAVE_FILE, tostring(v1137))

		local v1138 = l_LocalPlayer_18.Character and l_LocalPlayer_18.Character:FindFirstChild("Humanoid")
		if v1138 then
			v1138.WalkSpeed = v1137
		end
	end
})

v499:AddSlider({
	Title = "Nhảy Cao",
	Min = 50,
	Max = 500,
	Default = getgenv().JumpValue,
	Callback = function(v1139)
		getgenv().JumpValue = v1139
		writefile(JUMP_SAVE_FILE, tostring(v1139))

		local v1140 = l_LocalPlayer_18.Character and l_LocalPlayer_18.Character:FindFirstChild("Humanoid")
		if v1140 then
			v1140.JumpPower = v1139
		end
	end
})
v499:AddToggle({
    Name = "Xóa Lava",
    Description = "",
    Default = false,
    Callback = function(v1141)
        _G.RemoveLava = v1141
    end
})
spawn(function()
    while task.wait(1) do
        if _G.RemoveLava then
            for _, v1143 in pairs(workspace:GetDescendants()) do
                do
                    local l_v1143_0 = v1143
                    if l_v1143_0:IsA("BasePart") and string.lower(l_v1143_0.Name):find("lava") then
                        pcall(function()
                            l_v1143_0:Destroy()
                        end)
                    end
                end
            end
        end
    end
end)

v499:AddToggle({Title = "Infinite Soru", Value = false, Callback = function(v1170)
    _G.AutoHaki = v1170
end})
spawn(function()
    while task.wait(0.1) do
        if _G.AutoHaki then
            pcall(AutoHaki)
        end
    end
end)
v499:AddToggle({
    Title = "Tự động bật V3",
    Description = "",
    Value = false,
    Callback = function(v1171)
        _G.AutoRaceV3 = v1171
    end
})
spawn(function()
    while wait() do
        pcall(function()
            if _G.AutoRaceV3 then
                game:GetService("ReplicatedStorage").Remotes.CommE:FireServer("ActivateAbility")
            end
        end)
    end
end)
_G.AutoRaceV4 = false

v499:AddToggle({
    Title = "Tự động bật V4",
    Description = "",
    Value = false,
    Callback = function(state)
        _G.AutoRaceV4 = state
    end
})

spawn(function()
    while task.wait(0.5) do
        if _G.AutoRaceV4 then
            pcall(function()

                local player = game.Players.LocalPlayer
                local char = player.Character
                if not char then return end

                local energy = char:FindFirstChild("RaceEnergy")
                local transformed = char:FindFirstChild("RaceTransformed")

                if energy and transformed then
                    if energy.Value >= 1 and not transformed.Value then
                        
                        local vim = game:GetService("VirtualInputManager")
                        vim:SendKeyEvent(true, Enum.KeyCode.Y, false, game)
                        task.wait(0.1)
                        vim:SendKeyEvent(false, Enum.KeyCode.Y, false, game)

                        task.wait(5)
                    end
                end

            end)
        end
    end
end)
v499:AddToggle({Title = "Infinite Soru", Value = false, Callback = function(v1173)
    InfiniteSoru = v1173
end})
spawn(function()
    while task.wait(1) do
        if InfiniteSoru and game:GetService("Players").LocalPlayer.Character:FindFirstChild("HumanoidRootPart") ~= "HumanoidRootPart" then
            pcall(function()
                for _, v1175 in next, getgc() do
                    if getfenv(v1175).script == game.Players.LocalPlayer.Character:WaitForChild("Soru") then
                        for v1176, v1177 in pairs(debug.getupvalues(v1175)) do
                            if type(v1177) == "table" and v1177.LastUse then
                                repeat
                                    task.wait(0.1)
                                    setupvalue(v1175, v1176, {LastAfter = 0, LastUse = 0})
                                until not InfiniteSoru or game:GetService("Players").LocalPlayer.Character.Humanoid.Health <= 0
                            end
                        end
                    end
                end
            end)
        end
    end
end)
PosY = 30
v496:AddToggle({Title = "Dodge No CD", Value = false, Callback = function(v1178)
    DodgewithoutCool = v1178
end})
function NoCooldown()
    for _, v1180 in next, getgc() do
        if typeof(v1180) == "function" and getfenv(v1180).script == game.Players.LocalPlayer.Character:WaitForChild("Dodge") then
            for v1181, v1182 in next, getupvalues(v1180) do
                if tostring(v1182) == "0.4" then
                    setupvalue(v1180, v1181, 0)
                end
            end
        end
    end
end
spawn(function()
    while wait() do
        if DodgewithoutCool then
            pcall(function()
                NoCooldown()
            end)
        end
    end
end)
v499:AddToggle({Title = "Infinite Geppo", Value = false, Callback = function(v1183)
    InfiniteGeppo = v1183
end})
spawn(function()
    while task.wait(1) do
        if InfiniteGeppo then
            pcall(function()
                for _, v1185 in next, getgc() do
                    if getfenv(v1185).script == game.Players.LocalPlayer.Character:WaitForChild("Geppo") then
                        for v1186, v1187 in next, getupvalues(v1185) do
                            if tostring(v1187) == "0" then
                                repeat
                                    wait(0.1)
                                    setupvalue(v1185, v1186, 0)
                                until not InfiniteGeppo or game:GetService("Players").LocalPlayer.Character.Humanoid.Health <= 0
                            end
                        end
                    end
                end
            end)
        end
    end
end)

v499:AddToggle({
    Title = "Walk on Water",
    Default = true,
    Callback = function(v1188)
        _G.WalkWater = v1188
    end
})

_G.WalkWater = true

spawn(function()
    while task.wait() do
        pcall(function()
            if not _G.WalkWater then
                game:GetService("Workspace").Map["WaterBase-Plane"].Size = Vector3.new(1000, 80, 1000)
            else
                game:GetService("Workspace").Map["WaterBase-Plane"].Size = Vector3.new(1000, 112, 1000)
            end
        end)
    end
end)

local Lighting = game:GetService("Lighting")
local FULLBRIGHT_SAVE_FILE = "fullbright_save.txt"

-- Salvar valores originais
local OriginalLighting = {
	Ambient = Lighting.Ambient,
	ColorShift_Bottom = Lighting.ColorShift_Bottom,
	ColorShift_Top = Lighting.ColorShift_Top,
	Brightness = Lighting.Brightness,
	GlobalShadows = Lighting.GlobalShadows
}

local function ApplyFullBright(state)
	if state then
		Lighting.Ambient = Color3.new(1, 1, 1)
		Lighting.ColorShift_Bottom = Color3.new(1, 1, 1)
		Lighting.ColorShift_Top = Color3.new(1, 1, 1)
		Lighting.Brightness = 3
		Lighting.GlobalShadows = false
	else
		-- Restaurar original
		Lighting.Ambient = OriginalLighting.Ambient
		Lighting.ColorShift_Bottom = OriginalLighting.ColorShift_Bottom
		Lighting.ColorShift_Top = OriginalLighting.ColorShift_Top
		Lighting.Brightness = OriginalLighting.Brightness
		Lighting.GlobalShadows = OriginalLighting.GlobalShadows
	end
end

local FullBrightEnabled = false

if isfile(FULLBRIGHT_SAVE_FILE) then
	FullBrightEnabled = readfile(FULLBRIGHT_SAVE_FILE) == "true"
else
	writefile(FULLBRIGHT_SAVE_FILE, "false")
end

ApplyFullBright(FullBrightEnabled)

v496:AddToggle({
	Title = "Full Bright",
	Value = FullBrightEnabled,
	Callback = function(Value)
		FullBrightEnabled = Value
		writefile(FULLBRIGHT_SAVE_FILE, tostring(Value))
		ApplyFullBright(Value)
	end
})

v496:AddButton({
   Title = "Remove Sky Fog",
   Description = "",
   Callback = function()
    if Lighting:FindFirstChild("LightingLayers") then Lighting.LightingLayers:Destroy() end
    if Lighting:FindFirstChild("SeaTerrorCC") then Lighting.SeaTerrorCC:Destroy() end
    if Lighting:FindFirstChild("FantasySky") then Lighting.FantasySky:Destroy() end
end
})
v496:AddButton({
    Title = "Join Pirates Team",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("SetTeam", "Pirates")
    end
})
v496:AddButton({
    Title = "Join Marines Team",
    Callback = function()
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("SetTeam", "Marines")
    end
})
v496:AddButton({
    Title = "Open Title Name",
    Callback = function()
        local v1209 = {[1] = "getTitles"}
        game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(v1209))
        game.Players.localPlayer.PlayerGui.Main.Titles.Visible = true
    end
})

v496:AddButton({
	Name = "FPS Boost",
	Callback = function()
		for _, v in ipairs(game:GetDescendants()) do
			if v:IsA("BasePart") then
				v.Material = Enum.Material.SmoothPlastic
				v.Reflectance = 0
			elseif v:IsA("Decal") or v:IsA("Texture") then
				v:Destroy()
			elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
				v.Enabled = false
			elseif v:IsA("Lighting") then
				v.GlobalShadows = false
				v.FogEnd = 1e10
				v.Brightness = 0
			end
		end
		setfpscap(60)
	end
})

local RunService = game:GetService("RunService")

v496:AddToggle({
	Name = "White Screen",
	Default = false,
	Callback = function(Value)

		_G.WhiteScreen = Value
		RunService:Set3dRenderingEnabled(not Value)

	end
})
v496:AddButton({
    Title = "Rejoin Server",
    Callback = function()
        game:GetService("TeleportService"):Teleport(game.PlaceId, game:GetService("Players").LocalPlayer)
    end
})
v496:AddButton({Title = "Server Hop", Callback = function()
    Hop()
end})

print("--[[Hop Server If You Meet Game Admin]]--")

local Admins = {
    red_game43 = true,
    rip_indra = true,
    Axiore = true,
    Polkster = true,
    wenlocktoad = true,
    Daigrock = true,
    toilamvidamme = true,
    oofficialnoobie = true,
    Uzoth = true,
    Azarth = true,
    arlthmetic = true,
    Death_King = true,
    Lunoven = true,
    TheGreateAced = true,
    rip_fud = true,
    drip_mama = true,
    layandikit12 = true,
    Hingoi = true,
}

task.spawn(function()
    while task.wait(1) do
        for _, player in pairs(game.Players:GetPlayers()) do
            if Admins[player.Name] then
                Hop()
                break
            end
        end
    end
end)

local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")

local Player = Players.LocalPlayer
local PlaceId = game.PlaceId
local JobId = game.JobId

_G.AutoRejoin30m = false
local RejoinRunning = false

-- ===== PEGAR SERVIDOR DIFERENTE =====
function GetNewServer()
    local Servers = {}
    
    local req = game:HttpGet(
        "https://games.roblox.com/v1/games/"..PlaceId.."/servers/Public?sortOrder=Asc&limit=100"
    )
    
    local data = HttpService:JSONDecode(req)

    for _, server in pairs(data.data) do
        if server.playing < server.maxPlayers and server.id ~= JobId then
            table.insert(Servers, server.id)
        end
    end

    if #Servers > 0 then
        return Servers[math.random(1, #Servers)]
    end
end

-- ===== TOGGLE REDZLIB =====
v496:AddToggle({
    Name = "Anti-reset",
    Description = "Server hop every 30 minutes",
    Default = false,
    Callback = function(Value)
        _G.AutoRejoin30m = Value
        
        if Value and not RejoinRunning then
            RejoinRunning = true
            
            task.spawn(function()
                while _G.AutoRejoin30m do
                    task.wait(1800) -- 30 minutos
                    
                    if not _G.AutoRejoin30m then break end
                    
                    local NewServer = GetNewServer()
                    
                    if NewServer then
                        TeleportService:TeleportToPlaceInstance(PlaceId, NewServer, Player)
                    else
                        TeleportService:Teleport(PlaceId, Player)
                    end
                end
                
                RejoinRunning = false
            end)
        end
    end
})

return redzlib