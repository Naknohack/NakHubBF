local data = "U2V0dGluZ3MgPSBTZXR0aW5ncyBvciB7fQoKbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIFJlcGxpY2F0ZWRTdG9yYWdlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpCmxvY2FsIEh0dHBTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJIdHRwU2VydmljZSIpCgpsb2NhbCBQbHIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCgppZiBTZXR0aW5ncy5UcmFuc2xhdG9yID09IHRydWUgdGhlbgogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIF9HLlJlZHpUcmFuc2xhdG9yID0gSHR0cFNlcnZpY2U6SlNPTkRlY29kZShnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9OYWtub2hhY2svUmVkelVpL3JlZnMvaGVhZHMvbWFpbi9OZXdQb3J0dWd1ZXNlLnR4dCIpKQogICAgZW5kKQplbmQKCmxvY2FsIGZ1bmN0aW9uIEpvaW5UZWFtKCkKICAgIGxvY2FsIHRhcmdldFRlYW0gPSAiTWFyaW5lcyIKICAgIGlmIFNldHRpbmdzLkpvaW5UZWFtID09ICJQaXJhdGVzIiB0aGVuCiAgICAgICAgdGFyZ2V0VGVhbSA9ICJQaXJhdGVzIgogICAgZW5kCgogICAgaWYgbm90IFBsci5UZWFtIG9yIChQbHIuVGVhbS5OYW1lIH49ICJNYXJpbmVzIiBhbmQgUGxyLlRlYW0uTmFtZSB+PSAiUGlyYXRlcyIpIHRoZW4KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIFJlcGxpY2F0ZWRTdG9yYWdlCiAgICAgICAgICAgICAgICA6V2FpdEZvckNoaWxkKCJSZW1vdGVzIikKICAgICAgICAgICAgICAgIDpXYWl0Rm9yQ2hpbGQoIkNvbW1GXyIpCiAgICAgICAgICAgICAgICA6SW52b2tlU2VydmVyKCJTZXRUZWFtIiwgdGFyZ2V0VGVhbSkKICAgICAgICBlbmQpCiAgICBlbmQKZW5kCgpKb2luVGVhbSgpCgpob29rZnVuY3Rpb24ocmVxdWlyZShnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuRWZmZWN0LkNvbnRhaW5lci5EZWF0aCksIGZ1bmN0aW9uKCkKICAgIC0tIGVtcHR5IGJsb2NrCmVuZCkKaG9va2Z1bmN0aW9uKHJlcXVpcmUoZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLkVmZmVjdC5Db250YWluZXIuUmVzcGF3biksIGZ1bmN0aW9uKCkKICAgIC0tIGVtcHR5IGJsb2NrCmVuZCkKaWYgZ2FtZS5QbGFjZUlkID09IDI3NTM5MTU1NDkgb3IgZ2FtZS5QbGFjZUlkID09IDg1MjExNzI5MTY4NzE1IHRoZW4KICAgIFdvcmxkMSA9IHRydWUKZWxzZWlmIGdhbWUuUGxhY2VJZCA9PSA0NDQyMjcyMTgzIG9yIGdhbWUuUGxhY2VJZCA9PSA3OTA5MTcwMzI2NTY1NyB0aGVuCiAgICBXb3JsZDIgPSB0cnVlCmVsc2VpZiBnYW1lLlBsYWNlSWQgPT0gNzQ0OTQyMzYzNSBvciBnYW1lLlBsYWNlSWQgPT0gMTAwMTE3MzMxMTIzMDg5IHRoZW4KICAgIFdvcmxkMyA9IHRydWUKZW5kCgpsb2NhbCB2dTMyID0gbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9OYWtub2hhY2svUmVkelVpL3JlZnMvaGVhZHMvbWFpbi9VaVJlZHpodWIubHVhIikpKCkKbG9jYWwgdjQ2NiA9IHZ1MzI6TWFrZVdpbmRvdyh7CiAgICBUaXRsZSA9ICJOYWtIdWIiLAogICAgU3ViVGl0bGUgPSAiQnkgTmFrbm9oYWNrIiwKICAgIFNhdmVGb2xkZXIgPSAiUmVkeiB8IHJlZHogbGliIHY1Lmx1YSIKfSkKCnY0NjY6QWRkTWluaW1pemVCdXR0b24oewogICAgQnV0dG9uID0geyBJbWFnZSA9ICJyYnhhc3NldGlkOi8vMTAwMzA2NDU4OTMzNDE0IiwgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAgfSwKICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMzUsIDAsIDM1KSwKICAgIENvcm5lciA9IHsgQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMC4yNSwgMCkgfSwKfSkKCmxvY2FsIHY0ODQgPSB2NDY2Ok1ha2VUYWIoeyJEaXNjb3JkIiwgImluZm8ifSkKbG9jYWwgdjQ5OSA9IHY0NjY6TWFrZVRhYih7IkFpbWJvdCIsICJTY3JvbGwifSkKbG9jYWwgdjQ5NCA9IHY0NjY6TWFrZVRhYih7IsSQ4buLbmggVuG7iyIsICJ1c2VyIn0pCmxvY2FsIHY0OTUgPSB2NDY2Ok1ha2VUYWIoeyJD4butYSBIw6BuZyIsICJzaG9wcGluZ0NhcnQifSkKbG9jYWwgdjQ5NiA9IHY0NjY6TWFrZVRhYih7IkJ1ZmYvTGluaFRpbmgiLCAic2V0dGluZ3MifSkKdjQ4NDpBZGREaXNjb3JkSW52aXRlKHsKICAgIE5hbWUgPSAiTmFrJk5ob2kgfCBDb21tdW5pdHkiLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIExvZ28gPSAicmJ4YXNzZXRpZDovLzExODM2MDQyNzQ5NDA0MyIsCiAgICBJbnZpdGUgPSAiaHR0cHM6Ly9kaXNjb3JkLmdnL3Z0Z1dlNVY5YmQiCn0pCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgIAp2NDk5OkFkZFRvZ2dsZSh7CglOYW1lID0gIkFpbWJvdCBDYW1lcmEiLAoJRGVzY3JpcHRpb24gPSAiIiwKCURlZmF1bHQgPSBmYWxzZSwKCUNhbGxiYWNrID0gZnVuY3Rpb24odmFsdWUpCgkJX0cuQWltQ2FtID0gdmFsdWUKCWVuZAp9KQoKdGFzay5zcGF3bihmdW5jdGlvbigpCgl3aGlsZSB0YXNrLndhaXQoKSBkbwoJCXBjYWxsKGZ1bmN0aW9uKCkKCQkJaWYgX0cuQWltQ2FtIHRoZW4KCQkJCWxvY2FsIGNhbWVyYSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhCgkJCQlsb2NhbCBjbG9zZXN0UGxheWVyID0gbmlsCgkJCQlsb2NhbCBjbG9zZXN0RGlzdCA9IG1hdGguaHVnZQoJCQkJbG9jYWwgbG9jYWxQbGF5ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKCQkJCQoJCQkJZm9yIF8sIHBsYXllciBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbwoJCQkJCWlmIHBsYXllciB+PSBsb2NhbFBsYXllcgoJCQkJCWFuZCBwbGF5ZXIuQ2hhcmFjdGVyCgkJCQkJYW5kIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkhlYWQiKQoJCQkJCWFuZCBwbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCgkJCQkJYW5kIHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWQuSGVhbHRoID4gMCB0aGVuCgkJCQkJCQoJCQkJCQlsb2NhbCBkaXN0ID0gKHBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbiAtIGxvY2FsUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKS5NYWduaXR1ZGUKCQkJCQkJCgkJCQkJCWlmIGRpc3QgPCBjbG9zZXN0RGlzdCB0aGVuCgkJCQkJCQljbG9zZXN0RGlzdCA9IGRpc3QKCQkJCQkJCWNsb3Nlc3RQbGF5ZXIgPSBwbGF5ZXIKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQllbmQKCQkJCQoJCQkJaWYgY2xvc2VzdFBsYXllcgoJCQkJYW5kIGNsb3Nlc3RQbGF5ZXIuQ2hhcmFjdGVyCgkJCQlhbmQgY2xvc2VzdFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCgkJCQkJCgkJCQkJY2FtZXJhLkNGcmFtZSA9IENGcmFtZS5uZXcoCgkJCQkJCWNhbWVyYS5DRnJhbWUuUG9zaXRpb24sCgkJCQkJCWNsb3Nlc3RQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24KCQkJCQkpCgkJCQllbmQKCQkJZW5kCgkJZW5kKQoJZW5kCmVuZCkKCnY0OTk6QWRkVG9nZ2xlKHsKCU5hbWUgPSAiQWltYm90IFNraWxscyIsCglEZXNjcmlwdGlvbiA9ICIiLAoJRGVmYXVsdCA9IGZhbHNlLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkKCQlTaWxlbnRBaW1fRW5hYmxlZCA9IHN0YXRlCgllbmQKfSkKCi0tPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLS0gU0lTVEVNQSBTSUxFTlQgQUlNIChMT0dPIERFUE9JUyBETyBUT0dHTEUpCi0tPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCBSUyA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQoKbG9jYWwgcGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCBjYW1lcmEgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQoKbG9jYWwgUHJlZGljdGlvbkVuYWJsZWQgPSB0cnVlCmxvY2FsIFByZWRpY3Rpb25BbW91bnQgPSAwLjEKbG9jYWwgbWF4UmFuZ2UgPSAxMDAwCgpsb2NhbCByZW5kZXJDb25uZWN0aW9uID0gbmlsCmxvY2FsIGN1cnJlbnRUb29sID0gbmlsCmxvY2FsIFBsYXllcnNQb3NpdGlvbiA9IG5pbApsb2NhbCBTZWxlY3RlZHBsYXllciA9IG5pbApsb2NhbCBjaGFyYWN0ZXJDb25uZWN0aW9ucyA9IHt9CgotLSA9PT09PT09PT09PT09PT09PSBIUlAgPT09PT09PT09PT09PT09PT0KbG9jYWwgZnVuY3Rpb24gZ2V0SFJQKG1vZGVsKQoJcmV0dXJuIG1vZGVsIGFuZCBtb2RlbDpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCmVuZAoKLS0gPT09PT09PT09PT09PT09PT0gQ0xFQVIgPT09PT09PT09PT09PT09PT0KbG9jYWwgZnVuY3Rpb24gY2xlYXJDb25uZWN0aW9ucygpCglmb3IgXywgYyBpbiBpcGFpcnMoY2hhcmFjdGVyQ29ubmVjdGlvbnMpIGRvCgkJcGNhbGwoZnVuY3Rpb24oKSBjOkRpc2Nvbm5lY3QoKSBlbmQpCgllbmQKCWNoYXJhY3RlckNvbm5lY3Rpb25zID0ge30KZW5kCgotLSA9PT09PT09PT09PT09PT09PSBURUFNIENIRUNLID09PT09PT09PT09PT09PT09CmxvY2FsIGZ1bmN0aW9uIGlzRW5lbXkocGxyKQoJaWYgbm90IHBsciBvciBwbHIgPT0gcGxheWVyIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAoJaWYgbm90IHBsYXllci5UZWFtIG9yIG5vdCBwbHIuVGVhbSB0aGVuIHJldHVybiB0cnVlIGVuZAoJcmV0dXJuIHBsYXllci5UZWFtIH49IHBsci5UZWFtCmVuZAoKLS0gPT09PT09PT09PT09PT09PT0gUFJFRElDVElPTiA9PT09PT09PT09PT09PT09PQpsb2NhbCBmdW5jdGlvbiBnZXRQcmVkaWN0ZWRQb3NpdGlvbihocnApCglpZiBub3QgaHJwIHRoZW4gcmV0dXJuIG5pbCBlbmQKCWxvY2FsIGh1bSA9IGhycC5QYXJlbnQ6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKQoJaWYgbm90IGh1bSBvciBub3QgUHJlZGljdGlvbkVuYWJsZWQgb3IgaHVtLldhbGtTcGVlZCA8IDUgdGhlbgoJCXJldHVybiBocnAuUG9zaXRpb24KCWVuZAoJcmV0dXJuIGhycC5Qb3NpdGlvbiArIChocnAuVmVsb2NpdHkgKiBQcmVkaWN0aW9uQW1vdW50KQplbmQKCi0tID09PT09PT09PT09PT09PT09IENMT1NFU1QgUExBWUVSID09PT09PT09PT09PT09PT09CmxvY2FsIGZ1bmN0aW9uIGdldENsb3Nlc3RQbGF5ZXIobHBIUlApCglsb2NhbCBjbG9zZXN0LCBkaXN0ID0gbmlsLCBtYXRoLmh1Z2UKCWZvciBfLCBwbHIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwoJCWlmIGlzRW5lbXkocGxyKSBhbmQgcGxyLkNoYXJhY3RlciB0aGVuCgkJCWxvY2FsIGh1bSA9IHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKQoJCQlsb2NhbCBocnAgPSBnZXRIUlAocGxyLkNoYXJhY3RlcikKCQkJaWYgaHVtIGFuZCBodW0uSGVhbHRoID4gMCBhbmQgaHJwIHRoZW4KCQkJCWxvY2FsIGQgPSAoaHJwLlBvc2l0aW9uIC0gbHBIUlAuUG9zaXRpb24pLk1hZ25pdHVkZQoJCQkJaWYgZCA8IGRpc3QgYW5kIGQgPD0gbWF4UmFuZ2UgdGhlbgoJCQkJCWRpc3QgPSBkCgkJCQkJY2xvc2VzdCA9IHBscgoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kCglyZXR1cm4gY2xvc2VzdAplbmQKCi0tID09PT09PT09PT09PT09PT09IFNLSUxMIFJFQURZID09PT09PT09PT09PT09PT09CmxvY2FsIGZ1bmN0aW9uIGlzU2tpbGxSZWFkeUZvclRvb2wodG9vbE5hbWUpCglpZiBub3QgdG9vbE5hbWUgdGhlbiByZXR1cm4gZmFsc2UgZW5kCglsb2NhbCBndWkgPSBwbGF5ZXI6RmluZEZpcnN0Q2hpbGQoIlBsYXllckd1aSIpCglpZiBub3QgZ3VpIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAoKCWxvY2FsIHNraWxscyA9IGd1aTpGaW5kRmlyc3RDaGlsZCgiTWFpbiIpIGFuZCBndWkuTWFpbjpGaW5kRmlyc3RDaGlsZCgiU2tpbGxzIikKCWlmIG5vdCBza2lsbHMgdGhlbiByZXR1cm4gZmFsc2UgZW5kCgoJbG9jYWwgdG9vbCA9IHNraWxsczpGaW5kRmlyc3RDaGlsZCh0b29sTmFtZSkKCWlmIG5vdCB0b29sIHRoZW4gcmV0dXJuIGZhbHNlIGVuZAoKCWZvciBfLCBrZXkgaW4gaXBhaXJzKHsiWiIsIlgiLCJDIiwiViJ9KSBkbwoJCWxvY2FsIHNraWxsID0gdG9vbDpGaW5kRmlyc3RDaGlsZChrZXkpCgkJaWYgc2tpbGwgYW5kIHNraWxsOkZpbmRGaXJzdENoaWxkKCJDb29sZG93biIpIHRoZW4KCQkJaWYgc2tpbGwuQ29vbGRvd24uU2l6ZS5YLlNjYWxlID09IDEgdGhlbgoJCQkJcmV0dXJuIHRydWUKCQkJZW5kCgkJZW5kCgllbmQKCXJldHVybiBmYWxzZQplbmQKCi0tID09PT09PT09PT09PT09PT09IFJFTkRFUiBMT09QID09PT09PT09PT09PT09PT09CmxvY2FsIGZ1bmN0aW9uIHN0YXJ0UmVuZGVyKCkKCWlmIHJlbmRlckNvbm5lY3Rpb24gdGhlbiByZXR1cm4gZW5kCgoJcmVuZGVyQ29ubmVjdGlvbiA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBub3QgU2lsZW50QWltX0VuYWJsZWQgdGhlbiByZXR1cm4gZW5kCgoJCWxvY2FsIGNoYXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCgkJbG9jYWwgaHJwID0gY2hhciBhbmQgZ2V0SFJQKGNoYXIpCgkJaWYgbm90IGhycCB0aGVuIHJldHVybiBlbmQKCgkJbG9jYWwgdGFyZ2V0ID0gU2VsZWN0ZWRwbGF5ZXIgb3IgZ2V0Q2xvc2VzdFBsYXllcihocnApCgkJaWYgbm90ICh0YXJnZXQgYW5kIHRhcmdldC5DaGFyYWN0ZXIpIHRoZW4KCQkJUGxheWVyc1Bvc2l0aW9uID0gbmlsCgkJCXJldHVybgoJCWVuZAoKCQlsb2NhbCB0aHJwID0gZ2V0SFJQKHRhcmdldC5DaGFyYWN0ZXIpCgkJaWYgbm90IHRocnAgdGhlbiByZXR1cm4gZW5kCgoJCVBsYXllcnNQb3NpdGlvbiA9IGdldFByZWRpY3RlZFBvc2l0aW9uKHRocnApCgoJCWlmIGN1cnJlbnRUb29sIGFuZCBpc1NraWxsUmVhZHlGb3JUb29sKGN1cnJlbnRUb29sLk5hbWUpIHRoZW4KCQkJbG9jYWwgbG9vayA9IChWZWN0b3IzLm5ldygKCQkJCVBsYXllcnNQb3NpdGlvbi5YLAoJCQkJaHJwLlBvc2l0aW9uLlksCgkJCQlQbGF5ZXJzUG9zaXRpb24uWgoJCQkpIC0gaHJwLlBvc2l0aW9uKS5Vbml0CgoJCQlocnAuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhocnAuUG9zaXRpb24sIGhycC5Qb3NpdGlvbiArIGxvb2spCgkJZW5kCgllbmQpCmVuZAoKbG9jYWwgZnVuY3Rpb24gc3RvcFJlbmRlcigpCglpZiByZW5kZXJDb25uZWN0aW9uIHRoZW4KCQlyZW5kZXJDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQoJCXJlbmRlckNvbm5lY3Rpb24gPSBuaWwKCWVuZAplbmQKCi0tID09PT09PT09PT09PT09PT09IFRPT0wgVFJBQ0sgPT09PT09PT09PT09PT09PT0KcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcikKCWNsZWFyQ29ubmVjdGlvbnMoKQoJdGFibGUuaW5zZXJ0KGNoYXJhY3RlckNvbm5lY3Rpb25zLAoJCWNoYXIuQ2hpbGRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKG9iaikKCQkJaWYgb2JqOklzQSgiVG9vbCIpIHRoZW4KCQkJCWN1cnJlbnRUb29sID0gb2JqCgkJCWVuZAoJCWVuZCkKCSkKZW5kKQotLSA9PT09PT09PT09PT09PT09PSBNRVRBTUVUSE9EID09PT09PT09PT09PT09PT09CnBjYWxsKGZ1bmN0aW9uKCkKCWxvY2FsIG10ID0gZ2V0cmF3bWV0YXRhYmxlKGdhbWUpCglzZXRyZWFkb25seShtdCwgZmFsc2UpCgoJbG9jYWwgb2xkID0gbXQuX19uYW1lY2FsbAoJbXQuX19uYW1lY2FsbCA9IG5ld2NjbG9zdXJlKGZ1bmN0aW9uKHNlbGYsIC4uLikKCQlsb2NhbCBtZXRob2QgPSBnZXRuYW1lY2FsbG1ldGhvZCgpCgkJbG9jYWwgYXJncyA9IHsuLi59CgoJCWlmIChtZXRob2QgPT0gIkZpcmVTZXJ2ZXIiIG9yIG1ldGhvZCA9PSAiSW52b2tlU2VydmVyIikKCQkJYW5kIFNpbGVudEFpbV9FbmFibGVkCgkJCWFuZCBQbGF5ZXJzUG9zaXRpb24KCQkJYW5kIHR5cGVvZihhcmdzWzFdKSA9PSAiVmVjdG9yMyIgdGhlbgoKCQkJYXJnc1sxXSA9IFBsYXllcnNQb3NpdGlvbgoJCQlyZXR1cm4gb2xkKHNlbGYsIHVucGFjayhhcmdzKSkKCQllbmQKCgkJcmV0dXJuIG9sZChzZWxmLCAuLi4pCgllbmQpCgoJc2V0cmVhZG9ubHkobXQsIHRydWUpCmVuZCkKCi0tID09PT09PT09PT09PT09PT09IEFVVE8gU1RBUlQgLyBTVE9QID09PT09PT09PT09PT09PT09ClJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCWlmIFNpbGVudEFpbV9FbmFibGVkIHRoZW4KCQlzdGFydFJlbmRlcigpCgllbHNlCgkJc3RvcFJlbmRlcigpCgllbmQKZW5kKQoKbG9jYWwgXyA9IHY0OTQ6QWRkU2VjdGlvbih7IkVzcCJ9KQpsb2NhbCBFU1BfU0laRV9GSUxFID0gImVzcF9zaXplX3NhdmUudHh0IgoKaWYgaXNmaWxlKEVTUF9TSVpFX0ZJTEUpIHRoZW4KCV9HLkVTUFNpemUgPSB0b251bWJlcihyZWFkZmlsZShFU1BfU0laRV9GSUxFKSkgb3IgMjQKZWxzZQoJX0cuRVNQU2l6ZSA9IDI0Cgl3cml0ZWZpbGUoRVNQX1NJWkVfRklMRSwgIjI0IikKZW5kCgp2NDk0OkFkZFNsaWRlcih7CglOYW1lID0gIkVTUCBTaXplIiwKCU1pbiA9IDEwLAoJTWF4ID0gNDAsCglEZWZhdWx0ID0gX0cuRVNQU2l6ZSwKCUNhbGxiYWNrID0gZnVuY3Rpb24oVmFsdWUpCgkJX0cuRVNQU2l6ZSA9IFZhbHVlCgkJd3JpdGVmaWxlKEVTUF9TSVpFX0ZJTEUsIHRvc3RyaW5nKFZhbHVlKSkKCgkJZm9yIF8sIHBsYXllciBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKTpHZXRQbGF5ZXJzKCkpIGRvCgkJCWlmIHBsYXllci5DaGFyYWN0ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCgkJCQlsb2NhbCBocnAgPSBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKCQkJCWxvY2FsIGVzcCA9IGhycDpGaW5kRmlyc3RDaGlsZCgiUGxheWVyRVNQIikKCgkJCQlpZiBlc3AgdGhlbgoJCQkJCWZvciBfLCBvYmogaW4gcGFpcnMoZXNwOkdldENoaWxkcmVuKCkpIGRvCgkJCQkJCWlmIG9iajpJc0EoIlRleHRMYWJlbCIpIHRoZW4KCQkJCQkJCW9iai5UZXh0U2l6ZSA9IFZhbHVlCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kCn0pCgpmb3IgXywgcGxheWVyIGluIHBhaXJzKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpOkdldFBsYXllcnMoKSkgZG8KCWlmIHBsYXllci5DaGFyYWN0ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCgkJbG9jYWwgaHJwID0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CgkJbG9jYWwgZXNwID0gaHJwOkZpbmRGaXJzdENoaWxkKCJQbGF5ZXJFU1AiKQoKCQlpZiBlc3AgdGhlbgoJCQlmb3IgXywgb2JqIGluIHBhaXJzKGVzcDpHZXRDaGlsZHJlbigpKSBkbwoJCQkJaWYgb2JqOklzQSgiVGV4dExhYmVsIikgdGhlbgoJCQkJCW9iai5UZXh0U2l6ZSA9IF9HLkVTUFNpemUKCQkJCWVuZAoJCQllbmQKCQllbmQKCWVuZAplbmQKCgpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgUnVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCgpsb2NhbCBMb2NhbFBsYXllciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKbG9jYWwgRVNQX1NBVkVfRklMRSA9ICJlc3BfcGxheWVyc19zYXZlLnR4dCIKCi0tIEVzdGFkbyBzYWx2bwpsb2NhbCBFU1BQbGF5ZXIgPSBmYWxzZQppZiBpc2ZpbGUoRVNQX1NBVkVfRklMRSkgdGhlbgoJRVNQUGxheWVyID0gcmVhZGZpbGUoRVNQX1NBVkVfRklMRSkgPT0gInRydWUiCmVsc2UKCXdyaXRlZmlsZShFU1BfU0FWRV9GSUxFLCAiZmFsc2UiKQplbmQKCmxvY2FsIENvbm5lY3Rpb25zID0ge30KCi0tIFJlbW92ZSBFU1AKbG9jYWwgZnVuY3Rpb24gUmVtb3ZlRVNQKHBsYXllcikKCWlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgoJCWxvY2FsIGhycCA9IHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQoJCWlmIGhycCB0aGVuCgkJCWxvY2FsIGVzcCA9IGhycDpGaW5kRmlyc3RDaGlsZCgiUGxheWVyRVNQIikKCQkJaWYgZXNwIHRoZW4KCQkJCWVzcDpEZXN0cm95KCkKCQkJZW5kCgkJZW5kCgllbmQKCglpZiBDb25uZWN0aW9uc1twbGF5ZXJdIHRoZW4KCQlDb25uZWN0aW9uc1twbGF5ZXJdOkRpc2Nvbm5lY3QoKQoJCUNvbm5lY3Rpb25zW3BsYXllcl0gPSBuaWwKCWVuZAplbmQKCi0tIENyaWFyIEVTUApsb2NhbCBmdW5jdGlvbiBDcmVhdGVFU1AocGxheWVyKQoJaWYgcGxheWVyID09IExvY2FsUGxheWVyIHRoZW4gcmV0dXJuIGVuZAoJaWYgbm90IEVTUFBsYXllciB0aGVuIHJldHVybiBlbmQKCWlmIG5vdCBwbGF5ZXIuQ2hhcmFjdGVyIHRoZW4gcmV0dXJuIGVuZAoKCWxvY2FsIGNoYXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCglsb2NhbCBocnAgPSBjaGFyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWRSb290UGFydCIsIDMpCglsb2NhbCBodW0gPSBjaGFyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiLCAzKQoKCWlmIG5vdCBocnAgb3Igbm90IGh1bSB0aGVuIHJldHVybiBlbmQKCglSZW1vdmVFU1AocGxheWVyKQoKCWxvY2FsIGd1aSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikKCWd1aS5OYW1lID0gIlBsYXllckVTUCIKCWd1aS5BZG9ybmVlID0gaHJwCglndWkuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMjAsIDAsIDQwKQoJZ3VpLlN0dWRzT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgMywgMCkKCWd1aS5BbHdheXNPblRvcCA9IHRydWUKCWd1aS5NYXhEaXN0YW5jZSA9IDk5OTk5OQoJZ3VpLkxpZ2h0SW5mbHVlbmNlID0gMAoJZ3VpLlBhcmVudCA9IGhycAoKCWxvY2FsIG5hbWVMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKCW5hbWVMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQoJbmFtZUxhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC41LCAwKQoJbmFtZUxhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApCgluYW1lTGFiZWwuUmljaFRleHQgPSB0cnVlCiAgICBuYW1lTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIxMCwyMTAsMjEwKSAKCW5hbWVMYWJlbC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMAoJbmFtZUxhYmVsLlRleHRTaXplID0gMjQKCW5hbWVMYWJlbC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKCW5hbWVMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuQ2VudGVyCgluYW1lTGFiZWwuVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LkNlbnRlcgoJbmFtZUxhYmVsLlBhcmVudCA9IGd1aQoKCWxvY2FsIGhwTGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCglocExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCglocExhYmVsLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC41LCAwKQoJaHBMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjUsIDApCglocExhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLDI1NSwwKQoJaHBMYWJlbC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMAoJaHBMYWJlbC5UZXh0U2l6ZSA9IDI0CglocExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwoJaHBMYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuQ2VudGVyCglocExhYmVsLlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5DZW50ZXIKCWhwTGFiZWwuUGFyZW50ID0gZ3VpCgoJQ29ubmVjdGlvbnNbcGxheWVyXSA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCgkJaWYgbm90IEVTUFBsYXllciB0aGVuCgkJCVJlbW92ZUVTUChwbGF5ZXIpCgkJCXJldHVybgoJCWVuZAoKCQlpZiBub3QgcGxheWVyLkNoYXJhY3RlciBvciBodW0uSGVhbHRoIDw9IDAgdGhlbgoJCQlSZW1vdmVFU1AocGxheWVyKQoJCQlyZXR1cm4KCQllbmQKCgkJbG9jYWwgbXlDaGFyID0gTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCgkJaWYgbm90IG15Q2hhciB0aGVuIHJldHVybiBlbmQKCgkJbG9jYWwgbXlIUlAgPSBteUNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQoJCWlmIG5vdCBteUhSUCB0aGVuIHJldHVybiBlbmQKCgkJbG9jYWwgZGlzdGFuY2UgPSBtYXRoLmZsb29yKAoJCQkobXlIUlAuUG9zaXRpb24gLSBocnAuUG9zaXRpb24pLk1hZ25pdHVkZQoJCSkKCiAgICAJbmFtZUxhYmVsLlRleHQgPSAiPGZvbnQgY29sb3I9J3JnYigyMzUsMjM1LDIzNSknPiIgLi4gcGxheWVyLk5hbWUgLi4gIjwvZm9udD4gWyAiICAuLiAgZGlzdGFuY2UgLi4gIm0gXSIKCQlocExhYmVsLlRleHQgPSAiWyIgLi4gbWF0aC5mbG9vcihodW0uSGVhbHRoKSAuLiAiLyIgLi4gbWF0aC5mbG9vcihodW0uTWF4SGVhbHRoKSAuLiAiXSIKCWVuZCkKZW5kCgotLSBTZXR1cCBqb2dhZG9yIChyZXNvbHZlIHNwYXduICsgcmVzcGF3bikKbG9jYWwgZnVuY3Rpb24gU2V0dXBQbGF5ZXIocGxheWVyKQoJaWYgcGxheWVyID09IExvY2FsUGxheWVyIHRoZW4gcmV0dXJuIGVuZAoKCXBsYXllci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCQlpZiBFU1BQbGF5ZXIgdGhlbgoJCQl0YXNrLndhaXQoMC4yKQoJCQlDcmVhdGVFU1AocGxheWVyKQoJCWVuZAoJZW5kKQoKCWlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgoJCXRhc2sud2FpdCgwLjIpCgkJQ3JlYXRlRVNQKHBsYXllcikKCWVuZAplbmQKCi0tIEFwbGljYXIgcGFyYSBqb2dhZG9yZXMgasOhIG5vIHNlcnZpZG9yCmZvciBfLHBsYXllciBpbiBpcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCglTZXR1cFBsYXllcihwbGF5ZXIpCmVuZAoKLS0gSm9nYWRvcmVzIG5vdm9zClBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihwbGF5ZXIpCglTZXR1cFBsYXllcihwbGF5ZXIpCmVuZCkKClBsYXllcnMuUGxheWVyUmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbihwbGF5ZXIpCglSZW1vdmVFU1AocGxheWVyKQplbmQpCgotLSBUb2dnbGUgZGEgc3VhIGxpYgp2NDk0OkFkZFRvZ2dsZSh7CglUaXRsZSA9ICJFU1AgUGxheWVycyIsCglEZWZhdWx0ID0gRVNQUGxheWVyLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQoJCUVTUFBsYXllciA9IHYKCQl3cml0ZWZpbGUoRVNQX1NBVkVfRklMRSwgdG9zdHJpbmcodikpCgoJCWZvciBfLHBsYXllciBpbiBpcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCgkJCWlmIHBsYXllciB+PSBMb2NhbFBsYXllciB0aGVuCgkJCQlpZiB2IHRoZW4KCQkJCQlDcmVhdGVFU1AocGxheWVyKQoJCQkJZWxzZQoJCQkJCVJlbW92ZUVTUChwbGF5ZXIpCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbmQKfSkKICAgIHY0OTQ6QWRkU2VjdGlvbigiVmlzdWFsIikKbG9jYWwgdnUxNCA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgoKdjQ5NDpBZGRCdXR0b24oewogICAgIk3GsGEgTmhhbSBUaOG6oWNoIiwKICAgIGZ1bmN0aW9uKCkKICAgICAgICBpZiB2dTE0LkNoYXJhY3RlciBhbmQgdnUxNC5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQgdGhlbgogICAgICAgICAgICByZXF1aXJlKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5FZmZlY3QuQ29udGFpbmVyLlV6b3RoU3BlYykoewogICAgICAgICAgICAgICAgUG9zaXRpb24gPSB2dTE0LkNoYXJhY3Rlci5QcmltYXJ5UGFydC5Qb3NpdGlvbgogICAgICAgICAgICB9KQogICAgICAgIGVuZAogICAgZW5kCn0pCmxvY2FsIHZ1MTQgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKCnY0OTQ6QWRkQnV0dG9uKHsKICAgICJMb+G6oWkgYuG7jyB0aOG7nWkgZ2lhbiBo4buTaSBjaGnDqnUgUG9ydGFsIERhc2gsCiAgICBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgcG9ydGFsID0gdnUxNC5CYWNrcGFjazpGaW5kRmlyc3RDaGlsZCgiUG9ydGFsLVBvcnRhbCIpIG9yICh2dTE0LkNoYXJhY3RlciBhbmQgdnUxNC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIlBvcnRhbC1Qb3J0YWwiKSkKICAgICAgICBpZiBwb3J0YWwgdGhlbgogICAgICAgICAgICBsb2NhbCBjb25uZWN0aW9ucyA9IGdldGNvbm5lY3Rpb25zKHBvcnRhbC5BY3RpdmF0ZWQpCiAgICAgICAgICAgIGZvciBpID0gMSwgI2Nvbm5lY3Rpb25zIGRvCiAgICAgICAgICAgICAgICBsb2NhbCBjb25uID0gY29ubmVjdGlvbnNbaV0KICAgICAgICAgICAgICAgIGxvY2FsIGZ1bmMgPSBjb25uLkZ1bmN0aW9uCiAgICAgICAgICAgICAgICBpZiBmdW5jIGFuZCAjZGVidWcuZ2V0dXB2YWx1ZXMoZnVuYykgPT0gOSB0aGVuCiAgICAgICAgICAgICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIHBvcnRhbCBhbmQgcG9ydGFsOklzRGVzY2VuZGFudE9mKGdhbWUpIGRvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Zy5zZXR1cHZhbHVlKGZ1bmMsIDIsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKSAKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCn0pCgpsb2NhbCBfID0gdjQ5NTpBZGRTZWN0aW9uKHsiRmlnaHRpbmcgU3R5bGUifSkKbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCmxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKQpsb2NhbCBSZXBsaWNhdGVkU3RvcmFnZSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQpsb2NhbCBMUCA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCmxvY2FsIFNFQQppZiBnYW1lLlBsYWNlSWQgPT0gMjc1MzkxNTU0OSBvciBnYW1lLlBsYWNlSWQgPT0gODUyMTE3MjkxNjg3MTUgdGhlbgoJU0VBID0gMQplbHNlaWYgZ2FtZS5QbGFjZUlkID09IDQ0NDIyNzIxODMgb3IgZ2FtZS5QbGFjZUlkID09IDc5MDkxNzAzMjY1NjU3IHRoZW4KCVNFQSA9IDIKZWxzZWlmIGdhbWUuUGxhY2VJZCA9PSA3NDQ5NDIzNjM1IG9yIGdhbWUuUGxhY2VJZCA9PSAxMDAxMTczMzExMjMwODkgdGhlbgoJU0VBID0gMwplbHNlCglyZXR1cm4KZW5kCgpfRy5CdXlGbHkgPSBmYWxzZQpsb2NhbCBCViwgQkcKbG9jYWwgVGFyZ2V0UG9zID0gbmlsCgpsb2NhbCBOUENTID0gewoJQmxhY2tMZWc9e1sxXT17VmVjdG9yMy5uZXcoLTk4OCwxMywzOTk2KX0sWzJdPXtWZWN0b3IzLm5ldygtNDc1MC42MSwgMzUuMDgsIC00ODQ2LjMzKX0sWzNdPXtWZWN0b3IzLm5ldygtNTA0My42NCwzNzEuMzUsLTMxODMuNDApfX0sCglFbGVjdHJvPXtbMV09e1ZlY3RvcjMubmV3KC01MzgyLjI3LDE0LjE1LC0yMTUwLjM0KX0sWzJdPXtWZWN0b3IzLm5ldygtNDg2My44MSwgMzUuMDgsIC00NzY3LjU0KX0sWzNdPXtWZWN0b3IzLm5ldygtNDk5My4yMCwzMTQuNTYsLTMxOTguMDYpfX0sCglGaXNobWFuS2FyYXRlPXtbMV09e1ZlY3RvcjMubmV3KDYxNTg0LjM1LDE4Ljg1LDk4OC44OSl9LFsyXT17VmVjdG9yMy5uZXcoLTQ5NjAuMDQsIDM1LjA4LCAtNDY2Mi42Nyl9LFszXT17VmVjdG9yMy5uZXcoLTUwMTcuMzksMzcxLjM1LC0zMTg3LjUzKX19LAoJU3VwZXJodW1hbj17WzJdPXtWZWN0b3IzLm5ldygxMzc4LjA1LCAyNDcuNDMsIC01MTg5LjM3KX0sWzNdPXtWZWN0b3IzLm5ldygtNDk5Ny41MywzNzEuMzUsLTMxOTcuNDYpfX0sCglEZWF0aFN0ZXA9e1syXT17VmVjdG9yMy5uZXcoNjM2MC4wNCwgMjk2LjY3LCAtNjc2My45Myl9LFszXT17VmVjdG9yMy5uZXcoLTQ5OTcuNjQsMzE0LjU2LC0zMjIwLjM3KX19LAoJU2hhcmttYW5LYXJhdGU9e1syXT17VmVjdG9yMy5uZXcoLTI2MDIuNDAsIDIzOS4yMiwgLTEwMzE0Ljc1KX0sWzNdPXtWZWN0b3IzLm5ldygtNDk3MC40OCwzMTQuNTYsLTMyMjUuMDQpfX0sCglFbGVjdHJpY0NsYXc9e1szXT17VmVjdG9yMy5uZXcoLTEwMzY5LjgzLDMzMS42OSwtMTAxMjYuNDkpfX0sCglEcmFnb25UYWxvbj17WzNdPXtWZWN0b3IzLm5ldyg1NjYyLjAzLDEyMTEuMzIsODU4LjYwKX19LAoJR29kSHVtYW49e1szXT17VmVjdG9yMy5uZXcoLTEzNzc1LjU2LDMzNC42NiwtOTg3Ny42Nyl9fSwKCVNhbmd1aW5lQXJ0PXtbM109e1ZlY3RvcjMubmV3KC0xNjUxNC44NiwyMy4xOCwtMTkwLjg0KX19Cn0KCmxvY2FsIGZ1bmN0aW9uIEhSUCgpCglyZXR1cm4gTFAuQ2hhcmFjdGVyIGFuZCBMUC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQplbmQKCmxvY2FsIExWLCBBTwpsb2NhbCBUYXJnZXRQb3MKCmxvY2FsIGZ1bmN0aW9uIEVuc3VyZUZseSgpCglsb2NhbCBocnAgPSBIUlAoKQoJaWYgbm90IGhycCB0aGVuIHJldHVybiBlbmQKCglpZiBub3QgTFYgb3IgTFYuUGFyZW50IH49IGhycCB0aGVuCgkJaWYgTFYgdGhlbiBMVjpEZXN0cm95KCkgZW5kCgkJTFYgPSBJbnN0YW5jZS5uZXcoIkxpbmVhclZlbG9jaXR5IikKCQlMVi5BdHRhY2htZW50MCA9IGhycDpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkF0dGFjaG1lbnQiKSBvciBJbnN0YW5jZS5uZXcoIkF0dGFjaG1lbnQiLCBocnApCgkJTFYuTWF4Rm9yY2UgPSBtYXRoLmh1Z2UKCQlMVi5WZWN0b3JWZWxvY2l0eSA9IFZlY3RvcjMuemVybwoJCUxWLlBhcmVudCA9IGhycAoJZW5kCgoJaWYgbm90IEFPIG9yIEFPLlBhcmVudCB+PSBocnAgdGhlbgoJCWlmIEFPIHRoZW4gQU86RGVzdHJveSgpIGVuZAoJCUFPID0gSW5zdGFuY2UubmV3KCJBbGlnbk9yaWVudGF0aW9uIikKCQlBTy5BdHRhY2htZW50MCA9IGhycDpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkF0dGFjaG1lbnQiKQoJCUFPLk1heFRvcnF1ZSA9IG1hdGguaHVnZQoJCUFPLlJlc3BvbnNpdmVuZXNzID0gMjAwCgkJQU8uUGFyZW50ID0gaHJwCgllbmQKZW5kCgpsb2NhbCBmdW5jdGlvbiBTdG9wRmx5KCkKCVJ1blNlcnZpY2U6VW5iaW5kRnJvbVJlbmRlclN0ZXAoIkJ1eUZseSIpCglpZiBMViB0aGVuIExWOkRlc3Ryb3koKSBMVj1uaWwgZW5kCglpZiBBTyB0aGVuIEFPOkRlc3Ryb3koKSBBTz1uaWwgZW5kCglUYXJnZXRQb3MgPSBuaWwKZW5kCgpsb2NhbCBmdW5jdGlvbiBGbHlUbyhwb3MpCglUYXJnZXRQb3MgPSBwb3MKCglSdW5TZXJ2aWNlOkJpbmRUb1JlbmRlclN0ZXAoIkJ1eUZseSIsIEVudW0uUmVuZGVyUHJpb3JpdHkuQ2hhcmFjdGVyLlZhbHVlICsgMSwgZnVuY3Rpb24oKQoJCWlmIG5vdCBfRy5CdXlGbHkgdGhlbiBTdG9wRmx5KCkgcmV0dXJuIGVuZAoKCQlsb2NhbCBocnAgPSBIUlAoKQoJCWlmIG5vdCBocnAgdGhlbiByZXR1cm4gZW5kCgoJCUVuc3VyZUZseSgpCgoJCWZvciBfLHYgaW4gaXBhaXJzKExQLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwoJCQlpZiB2OklzQSgiQmFzZVBhcnQiKSB0aGVuIHYuQ2FuQ29sbGlkZSA9IGZhbHNlIGVuZAoJCWVuZAoKCQlsb2NhbCBkZWx0YSA9IFRhcmdldFBvcyAtIGhycC5Qb3NpdGlvbgoJCWxvY2FsIGRpc3QgPSBkZWx0YS5NYWduaXR1ZGUKCgkJaWYgZGlzdCA8PSAzIHRoZW4KCQkJTFYuVmVjdG9yVmVsb2NpdHkgPSBWZWN0b3IzLnplcm8KCQkJaHJwLkFzc2VtYmx5TGluZWFyVmVsb2NpdHkgPSBWZWN0b3IzLnplcm8KCQkJaHJwLkNGcmFtZSA9IENGcmFtZS5uZXcoVGFyZ2V0UG9zKQoJCQlyZXR1cm4KCQllbmQKCgkJbG9jYWwgZGlyID0gZGVsdGEuVW5pdAoJCUxWLlZlY3RvclZlbG9jaXR5ID0gZGlyICogbWF0aC5jbGFtcChkaXN0ICogNiwgMTIwLCAzMzApCgkJQU8uQ0ZyYW1lID0gQ0ZyYW1lLmxvb2tBdChocnAuUG9zaXRpb24sIGhycC5Qb3NpdGlvbiArIGRpcikKCWVuZCkKZW5kCgpsb2NhbCBmdW5jdGlvbiBCdXkoc3R5bGUsIHJlbW90ZSkKCXRhc2suc3Bhd24oZnVuY3Rpb24oKQoJCWxvY2FsIHBvcyA9IE5QQ1Nbc3R5bGVdIGFuZCBOUENTW3N0eWxlXVtTRUFdCgkJaWYgbm90IHBvcyB0aGVuIHJldHVybiBlbmQKCgkJRmx5VG8ocG9zWzFdKQoKCQlyZXBlYXQgdGFzay53YWl0KCkKCQl1bnRpbCAoSFJQKCkgYW5kIChIUlAoKS5Qb3NpdGlvbiAtIHBvc1sxXSkuTWFnbml0dWRlIDw9IDQpIG9yIG5vdCBfRy5CdXlGbHkKCgkJaWYgX0cuQnV5Rmx5IHRoZW4KCQkJUmVwbGljYXRlZFN0b3JhZ2UuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHJlbW90ZSkKCQllbmQKCWVuZCkKZW5kCgpMUC5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCXRhc2sud2FpdCgwLjQpCglpZiBfRy5CdXlGbHkgYW5kIFRhcmdldFBvcyB0aGVuCgkJRmx5VG8oVGFyZ2V0UG9zKQoJZW5kCmVuZCkKbG9jYWwgZnVuY3Rpb24gU3RvcEFsbEJ1eSgpCglfRy5CdXlGbHkgPSBmYWxzZQoJU3RvcEZseSgpCmVuZAoKdjQ5NTpBZGRUb2dnbGUoewoJVGl0bGUgPSAiQnV5IEJsYWNrIExlZyIsCglWYWx1ZSA9IGZhbHNlLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQoJCVN0b3BBbGxCdXkoKQoJCWlmIHYgdGhlbgoJCQlfRy5CdXlGbHkgPSB0cnVlCgkJCUJ1eSgiQmxhY2tMZWciLCJCdXlCbGFja0xlZyIpCgkJZW5kCgllbmQKfSkKCnY0OTU6QWRkVG9nZ2xlKHsKCVRpdGxlID0gIkJ1eSBFbGVjdHJvIiwKCVZhbHVlID0gZmFsc2UsCglDYWxsYmFjayA9IGZ1bmN0aW9uKHYpCgkJU3RvcEFsbEJ1eSgpCgkJaWYgdiB0aGVuCgkJCV9HLkJ1eUZseSA9IHRydWUKCQkJQnV5KCJFbGVjdHJvIiwiQnV5RWxlY3RybyIpCgkJZW5kCgllbmQKfSkKCnY0OTU6QWRkVG9nZ2xlKHsKCVRpdGxlID0gIkJ1eSBGaXNobWFuIEthcmF0ZSIsCglWYWx1ZSA9IGZhbHNlLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQoJCVN0b3BBbGxCdXkoKQoJCWlmIHYgdGhlbgoJCQlfRy5CdXlGbHkgPSB0cnVlCgkJCUJ1eSgiRmlzaG1hbkthcmF0ZSIsIkJ1eUZpc2htYW5LYXJhdGUiKQoJCWVuZAoJZW5kCn0pCgp2NDk1OkFkZFRvZ2dsZSh7CglUaXRsZSA9ICJCdXkgU3VwZXJodW1hbiIsCglWYWx1ZSA9IGZhbHNlLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQoJCVN0b3BBbGxCdXkoKQoJCWlmIHYgdGhlbgoJCQlfRy5CdXlGbHkgPSB0cnVlCgkJCUJ1eSgiU3VwZXJodW1hbiIsIkJ1eVN1cGVyaHVtYW4iKQoJCWVuZAoJZW5kCn0pCgp2NDk1OkFkZFRvZ2dsZSh7CglUaXRsZSA9ICJCdXkgRGVhdGggU3RlcCIsCglWYWx1ZSA9IGZhbHNlLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQoJCVN0b3BBbGxCdXkoKQoJCWlmIHYgdGhlbgoJCQlfRy5CdXlGbHkgPSB0cnVlCgkJCUJ1eSgiRGVhdGhTdGVwIiwiQnV5RGVhdGhTdGVwIikKCQllbmQKCWVuZAp9KQoKdjQ5NTpBZGRUb2dnbGUoewoJVGl0bGUgPSAiQnV5IFNoYXJrbWFuIEthcmF0ZSIsCglWYWx1ZSA9IGZhbHNlLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQoJCVN0b3BBbGxCdXkoKQoJCWlmIHYgdGhlbgoJCQlfRy5CdXlGbHkgPSB0cnVlCgkJCUJ1eSgiU2hhcmttYW5LYXJhdGUiLCJCdXlTaGFya21hbkthcmF0ZSIpCgkJZW5kCgllbmQKfSkKCnY0OTU6QWRkVG9nZ2xlKHsKCVRpdGxlID0gIkJ1eSBFbGVjdHJpYyBDbGF3IiwKCVZhbHVlID0gZmFsc2UsCglDYWxsYmFjayA9IGZ1bmN0aW9uKHYpCgkJU3RvcEFsbEJ1eSgpCgkJaWYgdiB0aGVuCgkJCV9HLkJ1eUZseSA9IHRydWUKCQkJQnV5KCJFbGVjdHJpY0NsYXciLCJCdXlFbGVjdHJpY0NsYXciKQoJCWVuZAoJZW5kCn0pCgp2NDk1OkFkZFRvZ2dsZSh7CglUaXRsZSA9ICJCdXkgRHJhZ29uIFRhbG9uIiwKCVZhbHVlID0gZmFsc2UsCglDYWxsYmFjayA9IGZ1bmN0aW9uKHYpCgkJU3RvcEFsbEJ1eSgpCgkJaWYgdiB0aGVuCgkJCV9HLkJ1eUZseSA9IHRydWUKCQkJQnV5KCJEcmFnb25UYWxvbiIsIkJ1eURyYWdvblRhbG9uIikKCQllbmQKCWVuZAp9KQoKdjQ5NTpBZGRUb2dnbGUoewoJVGl0bGUgPSAiQnV5IEdvZCBIdW1hbiIsCglWYWx1ZSA9IGZhbHNlLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbih2KQoJCVN0b3BBbGxCdXkoKQoJCWlmIHYgdGhlbgoJCQlfRy5CdXlGbHkgPSB0cnVlCgkJCUJ1eSgiR29kSHVtYW4iLCJCdXlHb2RodW1hbiIpCgkJZW5kCgllbmQKfSkKCnY0OTU6QWRkVG9nZ2xlKHsKCVRpdGxlID0gIkJ1eSBTYW5ndWluZSBBcnQiLAoJVmFsdWUgPSBmYWxzZSwKCUNhbGxiYWNrID0gZnVuY3Rpb24odikKCQlTdG9wQWxsQnV5KCkKCQlpZiB2IHRoZW4KCQkJX0cuQnV5Rmx5ID0gdHJ1ZQoJCQlCdXkoIlNhbmd1aW5lQXJ0IiwiQnV5U2FuZ3VpbmVBcnQiKQoJCWVuZAoJZW5kCn0pCgpsb2NhbCBfID0gdjQ5NTpBZGRTZWN0aW9uKHsiQnV5IFNlYSBFdmVudCBDcmFmdGluZyJ9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDcmFmdCBEcmFnb25oZWFydCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDcmFmdEl0ZW0iLCAiQ3JhZnQiLCAiRHJhZ29uaGVhcnQiKQogICAgZW5kCn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNyYWZ0IERyYWdvbnN0b3JtIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNyYWZ0SXRlbSIsICJDcmFmdCIsICJEcmFnb25zdG9ybSIpCiAgICBlbmQKfSkKdjQ5NTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ3JhZnQgRGlub0hvb2QiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ3JhZnRJdGVtIiwgIkNyYWZ0IiwgIkRpbm9Ib29kIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDcmFmdCBTaGFya1Rvb3RoIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNyYWZ0SXRlbSIsICJDcmFmdCIsICJTaGFya1Rvb3RoIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDcmFmdCBUZXJyb3JKYXciLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ3JhZnRJdGVtIiwgIkNyYWZ0IiwgIlRlcnJvckphdyIpCiAgICBlbmQKfSkKdjQ5NTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ3JhZnQgU2hhcmtBbmNob3IiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ3JhZnRJdGVtIiwgIkNyYWZ0IiwgIlNoYXJrQW5jaG9yIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDcmFmdCBMZXZpYXRoYW5Dcm93biIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDcmFmdEl0ZW0iLCAiQ3JhZnQiLCAiTGV2aWF0aGFuQ3Jvd24iKQogICAgZW5kCn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkNyYWZ0IExldmlhdGhhblNoaWVsZCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJDcmFmdEl0ZW0iLCAiQ3JhZnQiLCAiTGV2aWF0aGFuU2hpZWxkIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDcmFmdCBMZXZpYXRoYW5Cb2F0IiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkNyYWZ0SXRlbSIsICJDcmFmdCIsICJMZXZpYXRoYW5Cb2F0IikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJDcmFmdCBMZWdlbmRhcnlTY3JvbGwiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ3JhZnRJdGVtIiwgIkNyYWZ0IiwgIkxlZ2VuZGFyeVNjcm9sbCIpCiAgICBlbmQKfSkKdjQ5NTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQ3JhZnQgTXl0aGljYWxTY3JvbGwiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQ3JhZnRJdGVtIiwgIkNyYWZ0IiwgIk15dGhpY2FsU2Nyb2xsIikKICAgIGVuZAp9KQpsb2NhbCBfID0gdjQ5NTpBZGRTZWN0aW9uKHsiQnV5IEhha2ksU29ydS4uLiJ9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgR2VwcG8gJDEwLDAwMCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlIYWtpIiwgIkdlcHBvIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgQnVzbyBIYWtpICQyNSwwMDAiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SGFraSIsICJCdXNvIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgU29ydSAkMjUsMDAwIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUhha2kiLCAiU29ydSIpCiAgICBlbmQKfSkKdjQ5NTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQnV5IE9ic2VydmF0aW9uIEhha2kgJDc1MCwwMDAiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiS2VuVGFsayIsICJCdXkiKQogICAgZW5kCn0pCmxvY2FsIF8gPSB2NDk1OkFkZFNlY3Rpb24oeyJCdXkgU3dvcmQsR3VuIn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJ1eSBDdXRsYXNzICQxLDAwMCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkN1dGxhc3MiKQogICAgZW5kCn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJ1eSBLYXRhbmEgJDEsMDAwIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiS2F0YW5hIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgSXJvbiBNYWNlICQyNSwwMDAiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJJcm9uIE1hY2UiKQogICAgZW5kCn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJ1eSBEdWFsIEthdGFuYSAkMTIsMDAwIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiRHVlbCBLYXRhbmEiKQogICAgZW5kCn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJ1eSBUcmlwbGUgS2F0YW5hICQ2MCwwMDAiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJUcmlwbGUgS2F0YW5hIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgUGlwZSAkMTAwLDAwMCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIlBpcGUiKQogICAgZW5kCn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJ1eSBEdWFsLUhlYWRlZCBCbGFkZSAkNDAwLDAwMCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIkR1YWwtSGVhZGVkIEJsYWRlIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgQmlzZW50byAkMSwyMDAsMDAwIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiQmlzZW50byIpCiAgICBlbmQKfSkKdjQ5NTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQnV5IFNvdWwgQ2FuZSAkNzUwLDAwMCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCdXlJdGVtIiwgIlNvdWwgQ2FuZSIpCiAgICBlbmQKfSkKdjQ5NTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQnV5IFBvbGUgVjIgNSwwMDBGIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJUaHVuZGVyR29kVGFsayIpCiAgICBlbmQKfSkKdjQ5NTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQnV5IFNsaW5nc2hvdCAkNSwwMDAiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJTbGluZ3Nob3QiKQogICAgZW5kCn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkJ1eSBNdXNrZXQgJDgsMDAwIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiTXVza2V0IikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgRmxpbnRsb2NrICQxMCw1MDAiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJGbGludGxvY2siKQogICAgZW5kCn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJlZmluZWQgU2xpbmdzaG90ICQzMCwwMDAiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQnV5SXRlbSIsICJSZWZpbmVkIEZsaW50bG9jayIpCiAgICBlbmQKfSkKdjQ5NTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQnV5IFJlZmluZWQgRmxpbnRsb2NrICQ2NSwwMDAiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjExNTcgPSB7WzFdID0gIkJ1eUl0ZW0iLCBbMl0gPSAiUmVmaW5lZCBGbGludGxvY2sifQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYxMTU3KSkKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgQ2Fubm9uICQxMDAsMDAwIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIkJ1eUl0ZW0iLCAiQ2Fubm9uIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgS2FidWNoYSAxLDUwMEYiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJTbGluZ3Nob3QiLCAiMSIpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJTbGluZ3Nob3QiLCAiMiIpCiAgICBlbmQKfSkKdjQ5NTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiQnV5IEJpemFycmUgUmlmbGUgMjUwIEVjdG9wbGFzbSIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJFY3RvcGxhc20iLCAiQnV5IiwgMSkKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgQmxhY2sgQ2FwZSAkNTAsMDAwIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYxMTU4ID0ge1sxXSA9ICJCdXlJdGVtIiwgWzJdID0gIkJsYWNrIENhcGUifQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYxMTU4KSkKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJTd29yZHNtYW4gSGF0ICQxNTAsMDAwIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYxMTU5ID0ge1sxXSA9ICJCdXlJdGVtIiwgWzJdID0gIlN3b3Jkc21hbiBIYXQifQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIodW5wYWNrKHYxMTU5KSkKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJCdXkgVG9tb2UgUmluZyAkNTAwLDAwMCIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2MTE2MCA9IHtbMV0gPSAiQnV5SXRlbSIsIFsyXSA9ICJUb21vZSBSaW5nIn0KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKHVucGFjayh2MTE2MCkpCiAgICBlbmQKfSkKbG9jYWwgXyA9IHY0OTU6QWRkU2VjdGlvbih7IlJlc2V0IFN0YXRzICwgUmFuZG9tIFJhY2UifSkKdjQ5NTpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiYnV5IEdob3VsIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCB2MTE2MiA9IHtbMV0gPSAiRWN0b3BsYXNtIiwgWzJdID0gIkNoYW5nZSIsIFszXSA9IDR9CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjExNjIpKQogICAgZW5kCn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gImJ1eSBDeWJvcmciLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGxvY2FsIHYxMTYzID0ge1sxXSA9ICJDeWJvcmdUcmFpbmVyIiwgWzJdID0gIkJ1eSJ9CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjExNjMpKQogICAgZW5kCn0pCnY0OTU6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJlc2V0IFN0YXRzIDIsNTAwRiIsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKCkKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIlJlZnVuZCIsICIxIikKICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIikuUmVtb3Rlcy5Db21tRl86SW52b2tlU2VydmVyKCJCbGFja2JlYXJkUmV3YXJkIiwgIlJlZnVuZCIsICIyIikKICAgIGVuZAp9KQp2NDk1OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJSYW5kb20gUmFjZSAzLDAwMEYiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZXJvbGwiLCAiMSIpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiQmxhY2tiZWFyZFJld2FyZCIsICJSZXJvbGwiLCAiMiIpCiAgICBlbmQKfSkKCmxvY2FsIF8gPSB2NDk2OkFkZFNlY3Rpb24oeyJKb2luIFNlcnZlciJ9KQp2NDk2OkFkZFRleHRCb3goewogICAgICAgIE5hbWUgPSAiSm9iIElEIiwKICAgICAgICBQbGFjZWhvbGRlclRleHQgPSAiUGFzdGUgdGhlIEpvYiBJRCBoZXJlLi4uIiwKICAgICAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHAyMTUpCiAgICAgICAgICAgIGlmIHAyMTUgfj0gIiIgdGhlbgogICAgICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydFRvUGxhY2VJbnN0YW5jZShnYW1lLlBsYWNlSWQsIHAyMTUpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgfSkKdjQ5NjpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiSm9pbiBDbGlwYm9hcmQiLAogICAgRGVzY3JpcHRpb24gPSAiSm9pbiBzZXJ2ZXIgZnJvbSBjb3BpZWQgSm9iSWQiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgVGVsZXBvcnRTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKQogICAgICAgIGxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQogICAgICAgIGxvY2FsIExvY2FsUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgoKICAgICAgICBsb2NhbCBqb2JJZCA9IHRvc3RyaW5nKGdldGNsaXBib2FyZCgpKQoKICAgICAgICBpZiBqb2JJZCBhbmQgam9iSWQgfj0gIiIgdGhlbgogICAgICAgICAgICBUZWxlcG9ydFNlcnZpY2U6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoZ2FtZS5QbGFjZUlkLCBqb2JJZCwgTG9jYWxQbGF5ZXIpCiAgICAgICAgZWxzZQogICAgICAgICAgICB3YXJuKCJDbGlwYm9hcmQgdmF6aW8gb3UgaW52w6FsaWRvIikKICAgICAgICBlbmQKICAgIGVuZAp9KQoKbG9jYWwgXyA9IHY0OTY6QWRkU2VjdGlvbih7IlNldHRpbmdzIn0pCnY0OTY6QWRkVG9nZ2xlKHsKICAgIE5hbWUgPSAiRmFzdCBBdHRhY2siLAogICAgRGVzY3JpcHRpb24gPSAiIiwKICAgIERlZmF1bHQgPSB0cnVlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbih2YWx1ZSkKICAgICAgICBfRy5BdXRvQXR0YWNrID0gdmFsdWUKICAgICAgICBpZiB2YWx1ZSB0aGVuCiAgICAgICAgICAgIHByaW50KCIiKQogICAgICAgIGVsc2UKICAgICAgICAgICAgcHJpbnQoIiIpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCmxvY2FsIHYxID0gbmV4dApsb2NhbCB2MiA9IHsKICAgIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuVXRpbCwKICAgIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuQ29tbW9uLAogICAgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5SZW1vdGVzLAogICAgZ2FtZS5SZXBsaWNhdGVkU3RvcmFnZS5Bc3NldHMsCiAgICBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLkZYLAp9CmxvY2FsIHYzID0gbmlsCmxvY2FsIHU0ID0gbmlsCmxvY2FsIHU1ID0gbmlsCgp3aGlsZSB0cnVlIGRvCiAgICBsb2NhbCB2NgoKICAgIHYzLCB2NiA9IHYxKHYyLCB2MykKCiAgICBpZiB2MyA9PSBuaWwgdGhlbgogICAgICAgIGJyZWFrCiAgICBlbmQKCiAgICBsb2NhbCB2NyA9IG5leHQKICAgIGxvY2FsIHY4LCB2OSA9IHY2OkdldENoaWxkcmVuKCkKCiAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgbG9jYWwgdjEwCgogICAgICAgIHY5LCB2MTAgPSB2Nyh2OCwgdjkpCgogICAgICAgIGlmIHY5ID09IG5pbCB0aGVuCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgZW5kCiAgICAgICAgaWYgdjEwOklzQSgnUmVtb3RlRXZlbnQnKSBhbmQgdjEwOkdldEF0dHJpYnV0ZSgnSWQnKSB0aGVuCiAgICAgICAgICAgIHU1ID0gdjEwOkdldEF0dHJpYnV0ZSgnSWQnKQogICAgICAgICAgICB1NCA9IHYxMAogICAgICAgIGVuZAogICAgZW5kCgogICAgdjYuQ2hpbGRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKHAxMSkKICAgICAgICBpZiBwMTE6SXNBKCdSZW1vdGVFdmVudCcpIGFuZCBwMTE6R2V0QXR0cmlidXRlKCdJZCcpIHRoZW4KICAgICAgICAgICAgdTUgPSBwMTE6R2V0QXR0cmlidXRlKCdJZCcpCiAgICAgICAgICAgIHU0ID0gcDExCiAgICAgICAgZW5kCiAgICBlbmQpCmVuZAoKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoMC4wMDAxKSBkbwogICAgICAgIC0tIFPDsyBleGVjdXRhIHNlIG8gdG9nZ2xlIGVzdGl2ZXIgYXRpdmFkbwogICAgICAgIGlmIF9HLkF1dG9BdHRhY2sgdGhlbgogICAgICAgICAgICBsb2NhbCBfQ2hhcmFjdGVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICAgICAgICBsb2NhbCB2MTMKCiAgICAgICAgICAgIGlmIF9DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgdjEzID0gX0NoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHYxMyA9IF9DaGFyYWN0ZXIKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCB2MTQsIHYxNSwgdjE2ID0gaXBhaXJzKHsKICAgICAgICAgICAgICAgIHdvcmtzcGFjZS5FbmVtaWVzLAogICAgICAgICAgICAgICAgd29ya3NwYWNlLkNoYXJhY3RlcnMsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGxvY2FsIHUxNyA9IHt9CgogICAgICAgICAgICB3aGlsZSB0cnVlIGRvCiAgICAgICAgICAgICAgICBsb2NhbCB2MTgKCiAgICAgICAgICAgICAgICB2MTYsIHYxOCA9IHYxNCh2MTUsIHYxNikKCiAgICAgICAgICAgICAgICBpZiB2MTYgPT0gbmlsIHRoZW4KICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgbG9jYWwgdjE5LCB2MjAsIHYyMSA9IGlwYWlycyh2MTggYW5kIHYxODpHZXRDaGlsZHJlbigpIG9yIHt9KQoKICAgICAgICAgICAgICAgIHdoaWxlIHRydWUgZG8KICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MjIKCiAgICAgICAgICAgICAgICAgICAgdjIxLCB2MjIgPSB2MTkodjIwLCB2MjEpCgogICAgICAgICAgICAgICAgICAgIGlmIHYyMSA9PSBuaWwgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICBsb2NhbCBfSHVtYW5vaWRSb290UGFydCA9IHYyMjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgX0h1bWFub2lkID0gdjIyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZCcpCgogICAgICAgICAgICAgICAgICAgIGlmIHYyMiB+PSBfQ2hhcmFjdGVyIGFuZCAoX0h1bWFub2lkUm9vdFBhcnQgYW5kIChfSHVtYW5vaWQgYW5kIChfSHVtYW5vaWQuSGVhbHRoID4gMCBhbmQgKF9IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjEzLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNjApKSkgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB2MjUsIHYyNiwgdjI3ID0gaXBhaXJzKHYyMjpHZXRDaGlsZHJlbigpKQoKICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgdHJ1ZSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdjI4CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjI3LCB2MjggPSB2MjUodjI2LCB2MjcpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjI3ID09IG5pbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgdjI4OklzQSgnQmFzZVBhcnQnKSBhbmQgKF9IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gdjEzLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gNjAgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUxN1sjdTE3ICsgMV0gPSB7djIyLCB2Mjh9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBsb2NhbCBfVG9vbCA9IF9DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUb29sJykKCiAgICAgICAgICAgIGlmICN1MTcgPiAwIGFuZCAoX1Rvb2wgYW5kIChfVG9vbDpHZXRBdHRyaWJ1dGUoJ1dlYXBvblR5cGUnKSA9PSAnTWVsZWUnIG9yIF9Ub29sOkdldEF0dHJpYnV0ZSgnV2VhcG9uVHlwZScpID09ICdTd29yZCcpKSB0aGVuCiAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLk1vZHVsZXMuTmV0KTpSZW1vdGVFdmVudCgnUmVnaXN0ZXJIaXQnLCB0cnVlKQogICAgICAgICAgICAgICAgICAgIGdhbWUuUmVwbGljYXRlZFN0b3JhZ2UuTW9kdWxlcy5OZXRbJ1JFL1JlZ2lzdGVyQXR0YWNrJ106RmlyZVNlcnZlcigpCgogICAgICAgICAgICAgICAgICAgIGxvY2FsIF9IZWFkID0gdTE3WzFdWzFdOkZpbmRGaXJzdENoaWxkKCdIZWFkJykKCiAgICAgICAgICAgICAgICAgICAgaWYgX0hlYWQgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLk1vZHVsZXMuTmV0WydSRS9SZWdpc3RlckhpdCddOkZpcmVTZXJ2ZXIoX0hlYWQsIHUxNywge30sIHRvc3RyaW5nKGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5Vc2VySWQpOnN1YigyLCA0KSAuLiB0b3N0cmluZyhjb3JvdXRpbmUucnVubmluZygpKTpzdWIoMTEsIDE1KSkKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVyZWYodTQpOkZpcmVTZXJ2ZXIoc3RyaW5nLmdzdWIoJ1JFL1JlZ2lzdGVySGl0JywgJy4nLCBmdW5jdGlvbihwMzEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLmNoYXIoYml0MzIuYnhvcihzdHJpbmcuYnl0ZShwMzEpLCBtYXRoLmZsb29yKHdvcmtzcGFjZTpHZXRTZXJ2ZXJUaW1lTm93KCkgLyAxMCAlIDEwKSArIDEpKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQpLCBiaXQzMi5ieG9yKHU1ICsgOTA5MDkwLCBnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLk1vZHVsZXMuTmV0LnNlZWQ6SW52b2tlU2VydmVyKCkgKiAyKSwgX0hlYWQsIHUxNykKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQp2NDk2OkFkZFRvZ2dsZSh7CiAgICBOYW1lID0gIkJyaW5nIE1vYiIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgRGVmYXVsdCA9IHRydWUsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYxMTY1KQogICAgICAgIF9HLkJyaW5nTW9uc3RlciA9IHYxMTY1CiAgICAgICAgU3RvcFR3ZWVuKF9HLkJyaW5nTW9uc3RlcikKICAgIGVuZAp9KQpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoKSBkbwogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgQ2hlY2tRdWVzdCgpCiAgICAgICAgICAgIGZvciBfLCB2MTE2NyBpbiBwYWlycyhnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLkVuZW1pZXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgIGlmIF9HLkJyaW5nTW9uc3RlciBhbmQgKFN0YXJ0QnJpbmcgYW5kIHYxMTY3Lk5hbWUgPT0gTW9uRmFybSBvciB2MTE2Ny5OYW1lID09IE1vbiBhbmQgdjExNjc6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikgYW5kIHYxMTY3OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIHYxMTY3Lkh1bWFub2lkLkhlYWx0aCA+IDAgYW5kICh2MTE2Ny5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pLk1hZ25pdHVkZSA8PSAzMjApIHRoZW4KICAgICAgICAgICAgICAgICAgICBpZiB2MTE2Ny5OYW1lID09ICJGYWN0b3J5IFN0YWZmIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2MTE2Ny5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uIC0gUG9zTW9uLlBvc2l0aW9uKS5NYWduaXR1ZGUgPD0gMjUwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY3LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2MTE2Ny5IdW1hbm9pZFJvb3RQYXJ0LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExNjcuSHVtYW5vaWRSb290UGFydC5TaXplID0gVmVjdG9yMy5uZXcoNjAsIDYwLCA2MCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zTW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB2MTE2Ny5IdW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiQW5pbWF0b3IiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdjExNjcuSHVtYW5vaWQuQW5pbWF0b3I6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldGhpZGRlbnByb3BlcnR5KGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICh2MTE2Ny5OYW1lID09IE1vbkZhcm0gb3IgdjExNjcuTmFtZSA9PSBNb24pIGFuZCAodjExNjcuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiAtIFBvc01vbi5Qb3NpdGlvbikuTWFnbml0dWRlIDw9IDMyMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY3Lkh1bWFub2lkUm9vdFBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDYwLCA2MCwgNjApCiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY3Lkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gUG9zTW9uCiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY3Lkh1bWFub2lkUm9vdFBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY3LkhlYWQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHYxMTY3Lkh1bWFub2lkOkZpbmRGaXJzdENoaWxkKCJBbmltYXRvciIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYxMTY3Lkh1bWFub2lkLkFuaW1hdG9yOkRlc3Ryb3koKQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgc2V0aGlkZGVucHJvcGVydHkoZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLCAiU2ltdWxhdGlvblJhZGl1cyIsIG1hdGguaHVnZSkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKZW5kKQpmdW5jdGlvbiBJbk15TmV0V29yayh2MTE2OCkKICAgIGlmIG5vdCBpc25ldHdvcmtvd25lciB0aGVuCiAgICAgICAgaWYgKHYxMTY4LlBvc2l0aW9uIC0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKS5NYWduaXR1ZGUgPiAzMjAgdGhlbgogICAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgICBlbHNlCiAgICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgZW5kCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIGlzbmV0d29ya293bmVyKHYxMTY4KQogICAgZW5kCmVuZApsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikKbG9jYWwgbF9Mb2NhbFBsYXllcl8xOCA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKCi0tIGFycXVpdm9zIGRlIHNhdmUKbG9jYWwgU1BFRURfU0FWRV9GSUxFID0gIndhbGtzcGVlZF9zYXZlLnR4dCIKbG9jYWwgSlVNUF9TQVZFX0ZJTEUgPSAianVtcF9zYXZlLnR4dCIKCi0tIGNhcnJlZ2EgdmFsb3JlcyBzYWx2b3MKaWYgaXNmaWxlKFNQRUVEX1NBVkVfRklMRSkgdGhlbgoJZ2V0Z2VudigpLldhbGtTcGVlZFZhbHVlID0gdG9udW1iZXIocmVhZGZpbGUoU1BFRURfU0FWRV9GSUxFKSkgb3IgNTgKZWxzZQoJZ2V0Z2VudigpLldhbGtTcGVlZFZhbHVlID0gNTgKZW5kCgppZiBpc2ZpbGUoSlVNUF9TQVZFX0ZJTEUpIHRoZW4KCWdldGdlbnYoKS5KdW1wVmFsdWUgPSB0b251bWJlcihyZWFkZmlsZShKVU1QX1NBVkVfRklMRSkpIG9yIDU4CmVsc2UKCWdldGdlbnYoKS5KdW1wVmFsdWUgPSA1OAplbmQKCmxvY2FsIGZ1bmN0aW9uIHYxMTM1KHYxMTMzKQoJbG9jYWwgdjExMzQgPSB2MTEzMzpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIiwgNSkKCWlmIHYxMTM0IHRoZW4KCQl2MTEzNC5XYWxrU3BlZWQgPSBnZXRnZW52KCkuV2Fsa1NwZWVkVmFsdWUKCQl2MTEzNC5KdW1wUG93ZXIgPSBnZXRnZW52KCkuSnVtcFZhbHVlCgoJCXYxMTM0OkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiV2Fsa1NwZWVkIik6Q29ubmVjdChmdW5jdGlvbigpCgkJCXYxMTM0LldhbGtTcGVlZCA9IGdldGdlbnYoKS5XYWxrU3BlZWRWYWx1ZQoJCWVuZCkKCgkJdjExMzQ6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJKdW1wUG93ZXIiKTpDb25uZWN0KGZ1bmN0aW9uKCkKCQkJdjExMzQuSnVtcFBvd2VyID0gZ2V0Z2VudigpLkp1bXBWYWx1ZQoJCWVuZCkKCWVuZAplbmQKCmxfTG9jYWxQbGF5ZXJfMTguQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbih2MTEzNikKCXYxMTM1KHYxMTM2KQplbmQpCgppZiBsX0xvY2FsUGxheWVyXzE4LkNoYXJhY3RlciB0aGVuCgl2MTEzNShsX0xvY2FsUGxheWVyXzE4LkNoYXJhY3RlcikKZW5kCgp2NDk2OkFkZFNsaWRlcih7CglUaXRsZSA9ICJDaOG6oXkgbmhhbmgiLAoJTWluID0gMjYsCglNYXggPSAzMDAsCglEZWZhdWx0ID0gZ2V0Z2VudigpLldhbGtTcGVlZFZhbHVlLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbih2MTEzNykKCQlnZXRnZW52KCkuV2Fsa1NwZWVkVmFsdWUgPSB2MTEzNwoJCXdyaXRlZmlsZShTUEVFRF9TQVZFX0ZJTEUsIHRvc3RyaW5nKHYxMTM3KSkKCgkJbG9jYWwgdjExMzggPSBsX0xvY2FsUGxheWVyXzE4LkNoYXJhY3RlciBhbmQgbF9Mb2NhbFBsYXllcl8xOC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkIikKCQlpZiB2MTEzOCB0aGVuCgkJCXYxMTM4LldhbGtTcGVlZCA9IHYxMTM3CgkJZW5kCgllbmQKfSkKCnY0OTY6QWRkU2xpZGVyKHsKCVRpdGxlID0gIk5o4bqjeSBjYW8iLAoJTWluID0gNTAsCglNYXggPSA1MDAsCglEZWZhdWx0ID0gZ2V0Z2VudigpLkp1bXBWYWx1ZSwKCUNhbGxiYWNrID0gZnVuY3Rpb24odjExMzkpCgkJZ2V0Z2VudigpLkp1bXBWYWx1ZSA9IHYxMTM5CgkJd3JpdGVmaWxlKEpVTVBfU0FWRV9GSUxFLCB0b3N0cmluZyh2MTEzOSkpCgoJCWxvY2FsIHYxMTQwID0gbF9Mb2NhbFBsYXllcl8xOC5DaGFyYWN0ZXIgYW5kIGxfTG9jYWxQbGF5ZXJfMTguQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZCIpCgkJaWYgdjExNDAgdGhlbgoJCQl2MTE0MC5KdW1wUG93ZXIgPSB2MTEzOQoJCWVuZAoJZW5kCn0pCnY0OTY6QWRkVG9nZ2xlKHsKICAgIE5hbWUgPSAiWMOzYSBMYXZhIiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYxMTQxKQogICAgICAgIF9HLlJlbW92ZUxhdmEgPSB2MTE0MQogICAgZW5kCn0pCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgxKSBkbwogICAgICAgIGlmIF9HLlJlbW92ZUxhdmEgdGhlbgogICAgICAgICAgICBmb3IgXywgdjExNDMgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgICAgICAgICBkbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIGxfdjExNDNfMCA9IHYxMTQzCiAgICAgICAgICAgICAgICAgICAgaWYgbF92MTE0M18wOklzQSgiQmFzZVBhcnQiKSBhbmQgc3RyaW5nLmxvd2VyKGxfdjExNDNfMC5OYW1lKTpmaW5kKCJsYXZhIikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsX3YxMTQzXzA6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpCgp2NDk2OkFkZFRvZ2dsZSh7VGl0bGUgPSAiSW5maW5pdGUgU29ydSIsIFZhbHVlID0gZmFsc2UsIENhbGxiYWNrID0gZnVuY3Rpb24odjExNzApCiAgICBfRy5BdXRvSGFraSA9IHYxMTcwCmVuZH0pCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgwLjEpIGRvCiAgICAgICAgaWYgX0cuQXV0b0hha2kgdGhlbgogICAgICAgICAgICBwY2FsbChBdXRvSGFraSkKICAgICAgICBlbmQKICAgIGVuZAplbmQpCnY0OTY6QWRkVG9nZ2xlKHsKICAgIFRpdGxlID0gIlThu7EgxJHhu5luZyBi4bqtdCBWMyIsCiAgICBEZXNjcmlwdGlvbiA9ICIiLAogICAgVmFsdWUgPSBmYWxzZSwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24odjExNzEpCiAgICAgICAgX0cuQXV0b1JhY2VWMyA9IHYxMTcxCiAgICBlbmQKfSkKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgd2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBfRy5BdXRvUmFjZVYzIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1FOkZpcmVTZXJ2ZXIoIkFjdGl2YXRlQWJpbGl0eSIpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAplbmQpCl9HLkF1dG9SYWNlVjQgPSBmYWxzZQoKdjQ5NjpBZGRUb2dnbGUoewogICAgVGl0bGUgPSAiVOG7sSDEkeG7mW5nIGLhuq10IFY0IiwKICAgIERlc2NyaXB0aW9uID0gIiIsCiAgICBWYWx1ZSA9IGZhbHNlLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbihzdGF0ZSkKICAgICAgICBfRy5BdXRvUmFjZVY0ID0gc3RhdGUKICAgIGVuZAp9KQoKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KDAuNSkgZG8KICAgICAgICBpZiBfRy5BdXRvUmFjZVY0IHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQoKICAgICAgICAgICAgICAgIGxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgICAgICAgICAgbG9jYWwgY2hhciA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgIGlmIG5vdCBjaGFyIHRoZW4gcmV0dXJuIGVuZAoKICAgICAgICAgICAgICAgIGxvY2FsIGVuZXJneSA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIlJhY2VFbmVyZ3kiKQogICAgICAgICAgICAgICAgbG9jYWwgdHJhbnNmb3JtZWQgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJSYWNlVHJhbnNmb3JtZWQiKQoKICAgICAgICAgICAgICAgIGlmIGVuZXJneSBhbmQgdHJhbnNmb3JtZWQgdGhlbgogICAgICAgICAgICAgICAgICAgIGlmIGVuZXJneS5WYWx1ZSA+PSAxIGFuZCBub3QgdHJhbnNmb3JtZWQuVmFsdWUgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmltID0gZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsSW5wdXRNYW5hZ2VyIikKICAgICAgICAgICAgICAgICAgICAgICAgdmltOlNlbmRLZXlFdmVudCh0cnVlLCBFbnVtLktleUNvZGUuWSwgZmFsc2UsIGdhbWUpCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpCiAgICAgICAgICAgICAgICAgICAgICAgIHZpbTpTZW5kS2V5RXZlbnQoZmFsc2UsIEVudW0uS2V5Q29kZS5ZLCBmYWxzZSwgZ2FtZSkKCiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2sud2FpdCg1KQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kKQp2NDk2OkFkZFRvZ2dsZSh7VGl0bGUgPSAiSW5maW5pdGUgU29ydSIsIFZhbHVlID0gZmFsc2UsIENhbGxiYWNrID0gZnVuY3Rpb24odjExNzMpCiAgICBJbmZpbml0ZVNvcnUgPSB2MTE3MwplbmR9KQpzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoMSkgZG8KICAgICAgICBpZiBJbmZpbml0ZVNvcnUgYW5kIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIH49ICJIdW1hbm9pZFJvb3RQYXJ0IiB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciBfLCB2MTE3NSBpbiBuZXh0LCBnZXRnYygpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgZ2V0ZmVudih2MTE3NSkuc2NyaXB0ID09IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJTb3J1IikgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgdjExNzYsIHYxMTc3IGluIHBhaXJzKGRlYnVnLmdldHVwdmFsdWVzKHYxMTc1KSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHR5cGUodjExNzcpID09ICJ0YWJsZSIgYW5kIHYxMTc3Lkxhc3RVc2UgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMC4xKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cHZhbHVlKHYxMTc1LCB2MTE3Niwge0xhc3RBZnRlciA9IDAsIExhc3RVc2UgPSAwfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bnRpbCBub3QgSW5maW5pdGVTb3J1IG9yIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZC5IZWFsdGggPD0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAplbmQpClBvc1kgPSAzMAp2NDk2OkFkZFRvZ2dsZSh7VGl0bGUgPSAiRG9kZ2UgTm8gQ0QiLCBWYWx1ZSA9IGZhbHNlLCBDYWxsYmFjayA9IGZ1bmN0aW9uKHYxMTc4KQogICAgRG9kZ2V3aXRob3V0Q29vbCA9IHYxMTc4CmVuZH0pCmZ1bmN0aW9uIE5vQ29vbGRvd24oKQogICAgZm9yIF8sIHYxMTgwIGluIG5leHQsIGdldGdjKCkgZG8KICAgICAgICBpZiB0eXBlb2YodjExODApID09ICJmdW5jdGlvbiIgYW5kIGdldGZlbnYodjExODApLnNjcmlwdCA9PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOldhaXRGb3JDaGlsZCgiRG9kZ2UiKSB0aGVuCiAgICAgICAgICAgIGZvciB2MTE4MSwgdjExODIgaW4gbmV4dCwgZ2V0dXB2YWx1ZXModjExODApIGRvCiAgICAgICAgICAgICAgICBpZiB0b3N0cmluZyh2MTE4MikgPT0gIjAuNCIgdGhlbgogICAgICAgICAgICAgICAgICAgIHNldHVwdmFsdWUodjExODAsIHYxMTgxLCAwKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZApzcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB3YWl0KCkgZG8KICAgICAgICBpZiBEb2RnZXdpdGhvdXRDb29sIHRoZW4KICAgICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgTm9Db29sZG93bigpCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAplbmQpCnY0OTY6QWRkVG9nZ2xlKHtUaXRsZSA9ICJJbmZpbml0ZSBHZXBwbyIsIFZhbHVlID0gZmFsc2UsIENhbGxiYWNrID0gZnVuY3Rpb24odjExODMpCiAgICBJbmZpbml0ZUdlcHBvID0gdjExODMKZW5kfSkKc3Bhd24oZnVuY3Rpb24oKQogICAgd2hpbGUgdGFzay53YWl0KDEpIGRvCiAgICAgICAgaWYgSW5maW5pdGVHZXBwbyB0aGVuCiAgICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGZvciBfLCB2MTE4NSBpbiBuZXh0LCBnZXRnYygpIGRvCiAgICAgICAgICAgICAgICAgICAgaWYgZ2V0ZmVudih2MTE4NSkuc2NyaXB0ID09IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJHZXBwbyIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHYxMTg2LCB2MTE4NyBpbiBuZXh0LCBnZXR1cHZhbHVlcyh2MTE4NSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRvc3RyaW5nKHYxMTg3KSA9PSAiMCIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWl0KDAuMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXB2YWx1ZSh2MTE4NSwgdjExODYsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW50aWwgbm90IEluZmluaXRlR2VwcG8gb3IgZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkLkhlYWx0aCA8PSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCnY0OTY6QWRkVG9nZ2xlKHsKICAgIFRpdGxlID0gIsSQaSBi4buZIHRyw6puIG3hurd0IG7GsOG7m2MiLAogICAgRGVmYXVsdCA9IHRydWUsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKHYxMTg4KQogICAgICAgIF9HLldhbGtXYXRlciA9IHYxMTg4CiAgICBlbmQKfSkKCl9HLldhbGtXYXRlciA9IHRydWUKCnNwYXduKGZ1bmN0aW9uKCkKICAgIHdoaWxlIHRhc2sud2FpdCgpIGRvCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBub3QgX0cuV2Fsa1dhdGVyIHRoZW4KICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJXYXRlckJhc2UtUGxhbmUiXS5TaXplID0gVmVjdG9yMy5uZXcoMTAwMCwgODAsIDEwMDApCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiV29ya3NwYWNlIikuTWFwWyJXYXRlckJhc2UtUGxhbmUiXS5TaXplID0gVmVjdG9yMy5uZXcoMTAwMCwgMTEyLCAxMDAwKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbmQKZW5kKQoKbG9jYWwgTGlnaHRpbmcgPSBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIikKbG9jYWwgRlVMTEJSSUdIVF9TQVZFX0ZJTEUgPSAiZnVsbGJyaWdodF9zYXZlLnR4dCIKCi0tIFNhbHZhciB2YWxvcmVzIG9yaWdpbmFpcwpsb2NhbCBPcmlnaW5hbExpZ2h0aW5nID0gewoJQW1iaWVudCA9IExpZ2h0aW5nLkFtYmllbnQsCglDb2xvclNoaWZ0X0JvdHRvbSA9IExpZ2h0aW5nLkNvbG9yU2hpZnRfQm90dG9tLAoJQ29sb3JTaGlmdF9Ub3AgPSBMaWdodGluZy5Db2xvclNoaWZ0X1RvcCwKCUJyaWdodG5lc3MgPSBMaWdodGluZy5CcmlnaHRuZXNzLAoJR2xvYmFsU2hhZG93cyA9IExpZ2h0aW5nLkdsb2JhbFNoYWRvd3MKfQoKbG9jYWwgZnVuY3Rpb24gQXBwbHlGdWxsQnJpZ2h0KHN0YXRlKQoJaWYgc3RhdGUgdGhlbgoJCUxpZ2h0aW5nLkFtYmllbnQgPSBDb2xvcjMubmV3KDEsIDEsIDEpCgkJTGlnaHRpbmcuQ29sb3JTaGlmdF9Cb3R0b20gPSBDb2xvcjMubmV3KDEsIDEsIDEpCgkJTGlnaHRpbmcuQ29sb3JTaGlmdF9Ub3AgPSBDb2xvcjMubmV3KDEsIDEsIDEpCgkJTGlnaHRpbmcuQnJpZ2h0bmVzcyA9IDMKCQlMaWdodGluZy5HbG9iYWxTaGFkb3dzID0gZmFsc2UKCWVsc2UKCQktLSBSZXN0YXVyYXIgb3JpZ2luYWwKCQlMaWdodGluZy5BbWJpZW50ID0gT3JpZ2luYWxMaWdodGluZy5BbWJpZW50CgkJTGlnaHRpbmcuQ29sb3JTaGlmdF9Cb3R0b20gPSBPcmlnaW5hbExpZ2h0aW5nLkNvbG9yU2hpZnRfQm90dG9tCgkJTGlnaHRpbmcuQ29sb3JTaGlmdF9Ub3AgPSBPcmlnaW5hbExpZ2h0aW5nLkNvbG9yU2hpZnRfVG9wCgkJTGlnaHRpbmcuQnJpZ2h0bmVzcyA9IE9yaWdpbmFsTGlnaHRpbmcuQnJpZ2h0bmVzcwoJCUxpZ2h0aW5nLkdsb2JhbFNoYWRvd3MgPSBPcmlnaW5hbExpZ2h0aW5nLkdsb2JhbFNoYWRvd3MKCWVuZAplbmQKCmxvY2FsIEZ1bGxCcmlnaHRFbmFibGVkID0gZmFsc2UKCmlmIGlzZmlsZShGVUxMQlJJR0hUX1NBVkVfRklMRSkgdGhlbgoJRnVsbEJyaWdodEVuYWJsZWQgPSByZWFkZmlsZShGVUxMQlJJR0hUX1NBVkVfRklMRSkgPT0gInRydWUiCmVsc2UKCXdyaXRlZmlsZShGVUxMQlJJR0hUX1NBVkVfRklMRSwgImZhbHNlIikKZW5kCgpBcHBseUZ1bGxCcmlnaHQoRnVsbEJyaWdodEVuYWJsZWQpCgp2NDk2OkFkZFRvZ2dsZSh7CglUaXRsZSA9ICJTw6FuZyBy4buxYyBy4buhIiwKCVZhbHVlID0gRnVsbEJyaWdodEVuYWJsZWQsCglDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQoJCUZ1bGxCcmlnaHRFbmFibGVkID0gVmFsdWUKCQl3cml0ZWZpbGUoRlVMTEJSSUdIVF9TQVZFX0ZJTEUsIHRvc3RyaW5nKFZhbHVlKSkKCQlBcHBseUZ1bGxCcmlnaHQoVmFsdWUpCgllbmQKfSkKCnY0OTY6QWRkQnV0dG9uKHsKICAgVGl0bGUgPSAiWMOzYSBTxrDGoW5nIG3DuSIsCiAgIERlc2NyaXB0aW9uID0gIiIsCiAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgaWYgTGlnaHRpbmc6RmluZEZpcnN0Q2hpbGQoIkxpZ2h0aW5nTGF5ZXJzIikgdGhlbiBMaWdodGluZy5MaWdodGluZ0xheWVyczpEZXN0cm95KCkgZW5kCiAgICBpZiBMaWdodGluZzpGaW5kRmlyc3RDaGlsZCgiU2VhVGVycm9yQ0MiKSB0aGVuIExpZ2h0aW5nLlNlYVRlcnJvckNDOkRlc3Ryb3koKSBlbmQKICAgIGlmIExpZ2h0aW5nOkZpbmRGaXJzdENoaWxkKCJGYW50YXN5U2t5IikgdGhlbiBMaWdodGluZy5GYW50YXN5U2t5OkRlc3Ryb3koKSBlbmQKZW5kCn0pCnY0OTY6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIkpvaW4gUGlyYXRlcyBUZWFtIiwKICAgIENhbGxiYWNrID0gZnVuY3Rpb24oKQogICAgICAgIGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKS5SZW1vdGVzLkNvbW1GXzpJbnZva2VTZXJ2ZXIoIlNldFRlYW0iLCAiUGlyYXRlcyIpCiAgICBlbmQKfSkKdjQ5NjpBZGRCdXR0b24oewogICAgVGl0bGUgPSAiSm9pbiBNYXJpbmVzIFRlYW0iLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcigiU2V0VGVhbSIsICJNYXJpbmVzIikKICAgIGVuZAp9KQp2NDk2OkFkZEJ1dHRvbih7CiAgICBUaXRsZSA9ICJPcGVuIFRpdGxlIE5hbWUiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgdjEyMDkgPSB7WzFdID0gImdldFRpdGxlcyJ9CiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLlJlbW90ZXMuQ29tbUZfOkludm9rZVNlcnZlcih1bnBhY2sodjEyMDkpKQogICAgICAgIGdhbWUuUGxheWVycy5sb2NhbFBsYXllci5QbGF5ZXJHdWkuTWFpbi5UaXRsZXMuVmlzaWJsZSA9IHRydWUKICAgIGVuZAp9KQoKdjQ5NjpBZGRCdXR0b24oewoJTmFtZSA9ICJGUFMgQm9vc3QiLAoJQ2FsbGJhY2sgPSBmdW5jdGlvbigpCgkJZm9yIF8sIHYgaW4gaXBhaXJzKGdhbWU6R2V0RGVzY2VuZGFudHMoKSkgZG8KCQkJaWYgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbgoJCQkJdi5NYXRlcmlhbCA9IEVudW0uTWF0ZXJpYWwuU21vb3RoUGxhc3RpYwoJCQkJdi5SZWZsZWN0YW5jZSA9IDAKCQkJZWxzZWlmIHY6SXNBKCJEZWNhbCIpIG9yIHY6SXNBKCJUZXh0dXJlIikgdGhlbgoJCQkJdjpEZXN0cm95KCkKCQkJZWxzZWlmIHY6SXNBKCJQYXJ0aWNsZUVtaXR0ZXIiKSBvciB2OklzQSgiVHJhaWwiKSB0aGVuCgkJCQl2LkVuYWJsZWQgPSBmYWxzZQoJCQllbHNlaWYgdjpJc0EoIkxpZ2h0aW5nIikgdGhlbgoJCQkJdi5HbG9iYWxTaGFkb3dzID0gZmFsc2UKCQkJCXYuRm9nRW5kID0gMWUxMAoJCQkJdi5CcmlnaHRuZXNzID0gMAoJCQllbmQKCQllbmQKCQlzZXRmcHNjYXAoNjApCgllbmQKfSkKCnY0OTY6QWRkQnV0dG9uKHsKICAgIFRpdGxlID0gIlJlam9pbiBTZXJ2ZXIiLAogICAgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpUZWxlcG9ydChnYW1lLlBsYWNlSWQsIGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyKQogICAgZW5kCn0pCnY0OTY6QWRkQnV0dG9uKHtUaXRsZSA9ICJTZXJ2ZXIgSG9wIiwgQ2FsbGJhY2sgPSBmdW5jdGlvbigpCiAgICBIb3AoKQplbmR9KQoKcHJpbnQoIi0tW1tIb3AgU2VydmVyIElmIFlvdSBNZWV0IEdhbWUgQWRtaW5dXS0tIikKCmxvY2FsIEFkbWlucyA9IHsKICAgIHJlZF9nYW1lNDMgPSB0cnVlLAogICAgcmlwX2luZHJhID0gdHJ1ZSwKICAgIEF4aW9yZSA9IHRydWUsCiAgICBQb2xrc3RlciA9IHRydWUsCiAgICB3ZW5sb2NrdG9hZCA9IHRydWUsCiAgICBEYWlncm9jayA9IHRydWUsCiAgICB0b2lsYW12aWRhbW1lID0gdHJ1ZSwKICAgIG9vZmZpY2lhbG5vb2JpZSA9IHRydWUsCiAgICBVem90aCA9IHRydWUsCiAgICBBemFydGggPSB0cnVlLAogICAgYXJsdGhtZXRpYyA9IHRydWUsCiAgICBEZWF0aF9LaW5nID0gdHJ1ZSwKICAgIEx1bm92ZW4gPSB0cnVlLAogICAgVGhlR3JlYXRlQWNlZCA9IHRydWUsCiAgICByaXBfZnVkID0gdHJ1ZSwKICAgIGRyaXBfbWFtYSA9IHRydWUsCiAgICBsYXlhbmRpa2l0MTIgPSB0cnVlLAogICAgSGluZ29pID0gdHJ1ZSwKfQoKdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICB3aGlsZSB0YXNrLndhaXQoMSkgZG8KICAgICAgICBmb3IgXywgcGxheWVyIGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgIGlmIEFkbWluc1twbGF5ZXIuTmFtZV0gdGhlbgogICAgICAgICAgICAgICAgSG9wKCkKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kCmVuZCkKCmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCBUZWxlcG9ydFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlRlbGVwb3J0U2VydmljZSIpCmxvY2FsIEh0dHBTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJIdHRwU2VydmljZSIpCgpsb2NhbCBQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIFBsYWNlSWQgPSBnYW1lLlBsYWNlSWQKbG9jYWwgSm9iSWQgPSBnYW1lLkpvYklkCgpfRy5BdXRvUmVqb2luMzBtID0gZmFsc2UKbG9jYWwgUmVqb2luUnVubmluZyA9IGZhbHNlCgotLSA9PT09PSBQRUdBUiBTRVJWSURPUiBESUZFUkVOVEUgPT09PT0KZnVuY3Rpb24gR2V0TmV3U2VydmVyKCkKICAgIGxvY2FsIFNlcnZlcnMgPSB7fQogICAgCiAgICBsb2NhbCByZXEgPSBnYW1lOkh0dHBHZXQoCiAgICAgICAgImh0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8iLi5QbGFjZUlkLi4iL3NlcnZlcnMvUHVibGljP3NvcnRPcmRlcj1Bc2MmbGltaXQ9MTAwIgogICAgKQogICAgCiAgICBsb2NhbCBkYXRhID0gSHR0cFNlcnZpY2U6SlNPTkRlY29kZShyZXEpCgogICAgZm9yIF8sIHNlcnZlciBpbiBwYWlycyhkYXRhLmRhdGEpIGRvCiAgICAgICAgaWYgc2VydmVyLnBsYXlpbmcgPCBzZXJ2ZXIubWF4UGxheWVycyBhbmQgc2VydmVyLmlkIH49IEpvYklkIHRoZW4KICAgICAgICAgICAgdGFibGUuaW5zZXJ0KFNlcnZlcnMsIHNlcnZlci5pZCkKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGlmICNTZXJ2ZXJzID4gMCB0aGVuCiAgICAgICAgcmV0dXJuIFNlcnZlcnNbbWF0aC5yYW5kb20oMSwgI1NlcnZlcnMpXQogICAgZW5kCmVuZAoKLS0gPT09PT0gVE9HR0xFIFJFRFpMSUIgPT09PT0KdjQ5NjpBZGRUb2dnbGUoewogICAgTmFtZSA9ICJBbnRpLXJlc2V0IiwKICAgIERlc2NyaXB0aW9uID0gIlNlcnZlciBob3AgZXZlcnkgMzAgbWludXRlcyIsCiAgICBEZWZhdWx0ID0gZmFsc2UsCiAgICBDYWxsYmFjayA9IGZ1bmN0aW9uKFZhbHVlKQogICAgICAgIF9HLkF1dG9SZWpvaW4zMG0gPSBWYWx1ZQogICAgICAgIAogICAgICAgIGlmIFZhbHVlIGFuZCBub3QgUmVqb2luUnVubmluZyB0aGVuCiAgICAgICAgICAgIFJlam9pblJ1bm5pbmcgPSB0cnVlCiAgICAgICAgICAgIAogICAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIHdoaWxlIF9HLkF1dG9SZWpvaW4zMG0gZG8KICAgICAgICAgICAgICAgICAgICB0YXNrLndhaXQoMTgwMCkgLS0gMzAgbWludXRvcwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBfRy5BdXRvUmVqb2luMzBtIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgTmV3U2VydmVyID0gR2V0TmV3U2VydmVyKCkKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiBOZXdTZXJ2ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBUZWxlcG9ydFNlcnZpY2U6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoUGxhY2VJZCwgTmV3U2VydmVyLCBQbGF5ZXIpCiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBUZWxlcG9ydFNlcnZpY2U6VGVsZXBvcnQoUGxhY2VJZCwgUGxheWVyKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIFJlam9pblJ1bm5pbmcgPSBmYWxzZQogICAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICBlbmQKfSkKCnJldHVybiByZWR6bGli"

local decode = (syn and syn.crypt and syn.crypt.base64 and syn.crypt.base64.decode)
    or (crypt and crypt.base64decode)
    or (function(b)
        return game:GetService("HttpService"):Base64Decode(b)
    end)

loadstring(decode(data))()
